(function (g, f) {if ("object" == typeof exports && "object" == typeof module) {module.exports = f();} else if ("function" == typeof define && define.amd) {define("rrweb", [], f);} else if ("object" == typeof exports) {exports["rrweb"] = f();} else {g["rrweb"] = f();}}(typeof self !== 'undefined' ? self : typeof globalThis !== 'undefined' ? globalThis : this, () => {var exports = {};var module = { exports };
"use strict";var Xn=Object.defineProperty,Hn=Object.defineProperties;var Jn=Object.getOwnPropertyDescriptors;var Fe=Object.getOwnPropertySymbols;var ri=Object.prototype.hasOwnProperty,ni=Object.prototype.propertyIsEnumerable;var ii=(i,e,t)=>e in i?Xn(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,D=(i,e)=>{for(var t in e||(e={}))ri.call(e,t)&&ii(i,t,e[t]);if(Fe)for(var t of Fe(e))ni.call(e,t)&&ii(i,t,e[t]);return i},U=(i,e)=>Hn(i,Jn(e));var me=(i,e)=>{var t={};for(var s in i)ri.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&Fe)for(var s of Fe(i))e.indexOf(s)<0&&ni.call(i,s)&&(t[s]=i[s]);return t};Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});var Kn=Object.defineProperty,Qn=(i,e,t)=>e in i?Kn(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,C=(i,e,t)=>Qn(i,typeof e!="symbol"?e+"":e,t),oi,qn=Object.defineProperty,eo=(i,e,t)=>e in i?qn(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ai=(i,e,t)=>eo(i,typeof e!="symbol"?e+"":e,t),_=(i=>(i[i.Document=0]="Document",i[i.DocumentType=1]="DocumentType",i[i.Element=2]="Element",i[i.Text=3]="Text",i[i.CDATA=4]="CDATA",i[i.Comment=5]="Comment",i))(_||{});function to(i){return i.nodeType===i.ELEMENT_NODE}class or{constructor(){ai(this,"idNodeMap",new Map),ai(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;const s=(t=this.getMeta(e))==null?void 0:t.id;return s!=null?s:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(s=>this.removeNodeFromMap(s))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const s=t.id;this.idNodeMap.set(s,e),this.nodeMetaMap.set(e,t)}replace(e,t){const s=this.getNode(e);if(s){const r=this.nodeMetaMap.get(s);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function ar(){return new or}function so(i){return i.toLowerCase()}function io(i,e){return!i||!e||i.type!==e.type?!1:i.type===_.Document?i.compatMode===e.compatMode:i.type===_.DocumentType?i.name===e.name&&i.publicId===e.publicId&&i.systemId===e.systemId:i.type===_.Comment||i.type===_.Text||i.type===_.CDATA?i.textContent===e.textContent:i.type===_.Element?i.tagName===e.tagName&&JSON.stringify(i.attributes)===JSON.stringify(e.attributes)&&i.isSVG===e.isSVG&&i.needBlock===e.needBlock:!1}function ro(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function no(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(s){var r=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return i[s]}})}),t}var Is={exports:{}},E=String,lr=function(){return{isColorSupported:!1,reset:E,bold:E,dim:E,italic:E,underline:E,inverse:E,hidden:E,strikethrough:E,black:E,red:E,green:E,yellow:E,blue:E,magenta:E,cyan:E,white:E,gray:E,bgBlack:E,bgRed:E,bgGreen:E,bgYellow:E,bgBlue:E,bgMagenta:E,bgCyan:E,bgWhite:E,blackBright:E,redBright:E,greenBright:E,yellowBright:E,blueBright:E,magentaBright:E,cyanBright:E,whiteBright:E,bgBlackBright:E,bgRedBright:E,bgGreenBright:E,bgYellowBright:E,bgBlueBright:E,bgMagentaBright:E,bgCyanBright:E,bgWhiteBright:E}};Is.exports=lr();Is.exports.createColors=lr;var oo=Is.exports;const ao={},lo=Object.freeze(Object.defineProperty({__proto__:null,default:ao},Symbol.toStringTag,{value:"Module"})),W=no(lo);let li=oo,ui=W,Jt=class ur extends Error{constructor(e,t,s,r,n,o){super(e),this.name="CssSyntaxError",this.reason=e,n&&(this.file=n),r&&(this.source=r),o&&(this.plugin=o),typeof t!="undefined"&&typeof s!="undefined"&&(typeof t=="number"?(this.line=t,this.column=s):(this.line=t.line,this.column=t.column,this.endLine=s.line,this.endColumn=s.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,ur)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line!="undefined"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=li.isColorSupported);let s=c=>c,r=c=>c,n=c=>c;if(e){let{bold:c,gray:f,red:h}=li.createColors(!0);r=d=>c(h(d)),s=d=>f(d),ui&&(n=d=>ui(d))}let o=t.split(/\r?\n/),l=Math.max(this.line-3,0),a=Math.min(this.line+2,o.length),u=String(a).length;return o.slice(l,a).map((c,f)=>{let h=l+1+f,d=" "+(" "+h).slice(-u)+" | ";if(h===this.line){if(c.length>160){let b=20,p=Math.max(0,this.column-b),m=Math.max(this.column+b,this.endColumn+b),w=c.slice(p,m),v=s(d.replace(/\d/g," "))+c.slice(0,Math.min(this.column-1,b-1)).replace(/[^\t]/g," ");return r(">")+s(d)+n(w)+`
 `+v+r("^")}let g=s(d.replace(/\d/g," "))+c.slice(0,this.column-1).replace(/[^\t]/g," ");return r(">")+s(d)+n(c)+`
 `+g+r("^")}return" "+s(d)+n(c)}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}};var Ds=Jt;Jt.default=Jt;const ci={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function uo(i){return i[0].toUpperCase()+i.slice(1)}let Kt=class{constructor(e){this.builder=e}atrule(e,t){let s="@"+e.name,r=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName!="undefined"?s+=e.raws.afterName:r&&(s+=" "),e.nodes)this.block(e,s+r);else{let n=(e.raws.between||"")+(t?";":"");this.builder(s+r+n,e)}}beforeAfter(e,t){let s;e.type==="decl"?s=this.raw(e,null,"beforeDecl"):e.type==="comment"?s=this.raw(e,null,"beforeComment"):t==="before"?s=this.raw(e,null,"beforeRule"):s=this.raw(e,null,"beforeClose");let r=e.parent,n=0;for(;r&&r.type!=="root";)n+=1,r=r.parent;if(s.includes(`
`)){let o=this.raw(e,null,"indent");if(o.length)for(let l=0;l<n;l++)s+=o}return s}block(e,t){let s=this.raw(e,"between","beforeOpen");this.builder(t+s+"{",e,"start");let r;e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let s=this.raw(e,"semicolon");for(let r=0;r<e.nodes.length;r++){let n=e.nodes[r],o=this.raw(n,"before");o&&this.builder(o),this.stringify(n,t!==r||s)}}comment(e){let t=this.raw(e,"left","commentLeft"),s=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+s+"*/",e)}decl(e,t){let s=this.raw(e,"between","colon"),r=e.prop+s+this.rawValue(e,"value");e.important&&(r+=e.raws.important||" !important"),t&&(r+=";"),this.builder(r,e)}document(e){this.body(e)}raw(e,t,s){let r;if(s||(s=t),t&&(r=e.raws[t],typeof r!="undefined"))return r;let n=e.parent;if(s==="before"&&(!n||n.type==="root"&&n.first===e||n&&n.type==="document"))return"";if(!n)return ci[s];let o=e.root();if(o.rawCache||(o.rawCache={}),typeof o.rawCache[s]!="undefined")return o.rawCache[s];if(s==="before"||s==="after")return this.beforeAfter(e,s);{let l="raw"+uo(s);this[l]?r=this[l](o,e):o.walk(a=>{if(r=a.raws[t],typeof r!="undefined")return!1})}return typeof r=="undefined"&&(r=ci[s]),o.rawCache[s]=r,r}rawBeforeClose(e){let t;return e.walk(s=>{if(s.nodes&&s.nodes.length>0&&typeof s.raws.after!="undefined")return t=s.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let s;return e.walkComments(r=>{if(typeof r.raws.before!="undefined")return s=r.raws.before,s.includes(`
`)&&(s=s.replace(/[^\n]+$/,"")),!1}),typeof s=="undefined"?s=this.raw(t,null,"beforeDecl"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeDecl(e,t){let s;return e.walkDecls(r=>{if(typeof r.raws.before!="undefined")return s=r.raws.before,s.includes(`
`)&&(s=s.replace(/[^\n]+$/,"")),!1}),typeof s=="undefined"?s=this.raw(t,null,"beforeRule"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeOpen(e){let t;return e.walk(s=>{if(s.type!=="decl"&&(t=s.raws.between,typeof t!="undefined"))return!1}),t}rawBeforeRule(e){let t;return e.walk(s=>{if(s.nodes&&(s.parent!==e||e.first!==s)&&typeof s.raws.before!="undefined")return t=s.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(s=>{if(typeof s.raws.between!="undefined")return t=s.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(s=>{if(s.nodes&&s.nodes.length===0&&(t=s.raws.after,typeof t!="undefined"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(s=>{let r=s.parent;if(r&&r!==e&&r.parent&&r.parent===e&&typeof s.raws.before!="undefined"){let n=s.raws.before.split(`
`);return t=n[n.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(s=>{if(s.nodes&&s.nodes.length&&s.last.type==="decl"&&(t=s.raws.semicolon,typeof t!="undefined"))return!1}),t}rawValue(e,t){let s=e[t],r=e.raws[t];return r&&r.value===s?r.raw:s}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var cr=Kt;Kt.default=Kt;let co=cr;function Qt(i,e){new co(e).stringify(i)}var St=Qt;Qt.default=Qt;var _e={};_e.isClean=Symbol("isClean");_e.my=Symbol("my");let ho=Ds,fo=cr,po=St,{isClean:ge,my:mo}=_e;function qt(i,e){let t=new i.constructor;for(let s in i){if(!Object.prototype.hasOwnProperty.call(i,s)||s==="proxyCache")continue;let r=i[s],n=typeof r;s==="parent"&&n==="object"?e&&(t[s]=e):s==="source"?t[s]=r:Array.isArray(r)?t[s]=r.map(o=>qt(o,t)):(n==="object"&&r!==null&&(r=qt(r)),t[s]=r)}return t}function ye(i,e){if(e&&typeof e.offset!="undefined")return e.offset;let t=1,s=1,r=0;for(let n=0;n<i.length;n++){if(s===e.line&&t===e.column){r=n;break}i[n]===`
`?(t=1,s+=1):t+=1}return r}let es=class{constructor(e={}){this.raws={},this[ge]=!1,this[mo]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let s of e[t])typeof s.clone=="function"?this.append(s.clone()):this.append(s)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=qt(this);for(let s in e)t[s]=e[s];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:s,start:r}=this.rangeBy(t);return this.source.input.error(e,{column:r.column,line:r.line},{column:s.column,line:s.line},t)}return new ho(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,s){return e[t]===s||(e[t]=s,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markClean(){this[ge]=!0}markDirty(){if(this[ge]){this[ge]=!1;let e=this;for(;e=e.parent;)e[ge]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let r=this.source.input.css.slice(ye(this.source.input.css,this.source.start),ye(this.source.input.css,this.source.end)).indexOf(e.word);r!==-1&&(t=this.positionInside(r))}return t}positionInside(e){let t=this.source.start.column,s=this.source.start.line,r=ye(this.source.input.css,this.source.start),n=r+e;for(let o=r;o<n;o++)this.source.input.css[o]===`
`?(t=1,s+=1):t+=1;return{column:t,line:s}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},s=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let n=this.source.input.css.slice(ye(this.source.input.css,this.source.start),ye(this.source.input.css,this.source.end)).indexOf(e.word);n!==-1&&(t=this.positionInside(n),s=this.positionInside(n+e.word.length))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?s={column:e.end.column,line:e.end.line}:typeof e.endIndex=="number"?s=this.positionInside(e.endIndex):e.index&&(s=this.positionInside(e.index+1));return(s.line<t.line||s.line===t.line&&s.column<=t.column)&&(s={column:t.column+1,line:t.line}),{end:s,start:t}}raw(e,t){return new fo().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,s=!1;for(let r of e)r===this?s=!0:s?(this.parent.insertAfter(t,r),t=r):this.parent.insertBefore(t,r);s||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let s={},r=t==null;t=t||new Map;let n=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o)||o==="parent"||o==="proxyCache")continue;let l=this[o];if(Array.isArray(l))s[o]=l.map(a=>typeof a=="object"&&a.toJSON?a.toJSON(null,t):a);else if(typeof l=="object"&&l.toJSON)s[o]=l.toJSON(null,t);else if(o==="source"){let a=t.get(l.input);a==null&&(a=n,t.set(l.input,n),n++),s[o]={end:l.end,inputId:a,start:l.start}}else s[o]=l}return r&&(s.inputs=[...t.keys()].map(o=>o.toJSON())),s}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=po){e.stringify&&(e=e.stringify);let t="";return e(this,s=>{t+=s}),t}warn(e,t,s){let r={node:this};for(let n in s)r[n]=s[n];return e.warn(t,r)}get proxyOf(){return this}};var Et=es;es.default=es;let go=Et,ts=class extends go{constructor(e){super(e),this.type="comment"}};var xt=ts;ts.default=ts;let yo=Et,ss=class extends yo{constructor(e){e&&typeof e.value!="undefined"&&typeof e.value!="string"&&(e=U(D({},e),{value:String(e.value)})),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var At=ss;ss.default=ss;let hr=xt,fr=At,wo=Et,{isClean:pr,my:dr}=_e,Os,mr,gr,Ts;function yr(i){return i.map(e=>(e.nodes&&(e.nodes=yr(e.nodes)),delete e.source,e))}function wr(i){if(i[pr]=!1,i.proxyOf.nodes)for(let e of i.proxyOf.nodes)wr(e)}let J=class vr extends wo{append(...e){for(let t of e){let s=this.normalize(t,this.last);for(let r of s)this.proxyOf.nodes.push(r)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),s,r;for(;this.indexes[t]<this.proxyOf.nodes.length&&(s=this.indexes[t],r=e(this.proxyOf.nodes[s],s),r!==!1);)this.indexes[t]+=1;return delete this.indexes[t],r}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...s)=>e[t](...s.map(r=>typeof r=="function"?(n,o)=>r(n.toProxy(),o):r)):t==="every"||t==="some"?s=>e[t]((r,...n)=>s(r.toProxy(),...n)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(s=>s.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,s){return e[t]===s||(e[t]=s,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let s=this.index(e),r=this.normalize(t,this.proxyOf.nodes[s]).reverse();s=this.index(e);for(let o of r)this.proxyOf.nodes.splice(s+1,0,o);let n;for(let o in this.indexes)n=this.indexes[o],s<n&&(this.indexes[o]=n+r.length);return this.markDirty(),this}insertBefore(e,t){let s=this.index(e),r=s===0?"prepend":!1,n=this.normalize(t,this.proxyOf.nodes[s],r).reverse();s=this.index(e);for(let l of n)this.proxyOf.nodes.splice(s,0,l);let o;for(let l in this.indexes)o=this.indexes[l],s<=o&&(this.indexes[l]=o+n.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=yr(mr(e).nodes);else if(typeof e=="undefined")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let r of e)r.parent&&r.parent.removeChild(r,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let r of e)r.parent&&r.parent.removeChild(r,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value=="undefined")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new fr(e)]}else if(e.selector||e.selectors)e=[new Ts(e)];else if(e.name)e=[new Os(e)];else if(e.text)e=[new hr(e)];else throw new Error("Unknown node type in node creation");return e.map(r=>(r[dr]||vr.rebuild(r),r=r.proxyOf,r.parent&&r.parent.removeChild(r),r[pr]&&wr(r),r.raws||(r.raws={}),typeof r.raws.before=="undefined"&&t&&typeof t.raws.before!="undefined"&&(r.raws.before=t.raws.before.replace(/\S/g,"")),r.parent=this.proxyOf,r))}prepend(...e){e=e.reverse();for(let t of e){let s=this.normalize(t,this.first,"prepend").reverse();for(let r of s)this.proxyOf.nodes.unshift(r);for(let r in this.indexes)this.indexes[r]=this.indexes[r]+s.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let s in this.indexes)t=this.indexes[s],t>=e&&(this.indexes[s]=t-1);return this.markDirty(),this}replaceValues(e,t,s){return s||(s=t,t={}),this.walkDecls(r=>{t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,s))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,s)=>{let r;try{r=e(t,s)}catch(n){throw t.addToError(n)}return r!==!1&&t.walk&&(r=t.walk(e)),r})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if(s.type==="atrule"&&e.test(s.name))return t(s,r)}):this.walk((s,r)=>{if(s.type==="atrule"&&s.name===e)return t(s,r)}):(t=e,this.walk((s,r)=>{if(s.type==="atrule")return t(s,r)}))}walkComments(e){return this.walk((t,s)=>{if(t.type==="comment")return e(t,s)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if(s.type==="decl"&&e.test(s.prop))return t(s,r)}):this.walk((s,r)=>{if(s.type==="decl"&&s.prop===e)return t(s,r)}):(t=e,this.walk((s,r)=>{if(s.type==="decl")return t(s,r)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if(s.type==="rule"&&e.test(s.selector))return t(s,r)}):this.walk((s,r)=>{if(s.type==="rule"&&s.selector===e)return t(s,r)}):(t=e,this.walk((s,r)=>{if(s.type==="rule")return t(s,r)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};J.registerParse=i=>{mr=i};J.registerRule=i=>{Ts=i};J.registerAtRule=i=>{Os=i};J.registerRoot=i=>{gr=i};var se=J;J.default=J;J.rebuild=i=>{i.type==="atrule"?Object.setPrototypeOf(i,Os.prototype):i.type==="rule"?Object.setPrototypeOf(i,Ts.prototype):i.type==="decl"?Object.setPrototypeOf(i,fr.prototype):i.type==="comment"?Object.setPrototypeOf(i,hr.prototype):i.type==="root"&&Object.setPrototypeOf(i,gr.prototype),i[dr]=!0,i.nodes&&i.nodes.forEach(e=>{J.rebuild(e)})};let br=se,ct=class extends br{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var $s=ct;ct.default=ct;br.registerAtRule(ct);let vo=se,Cr,Sr,Ne=class extends vo{constructor(e){super(D({type:"document"},e)),this.nodes||(this.nodes=[])}toResult(e={}){return new Cr(new Sr,this,e).stringify()}};Ne.registerLazyResult=i=>{Cr=i};Ne.registerProcessor=i=>{Sr=i};var Ps=Ne;Ne.default=Ne;let bo="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Co=(i,e=21)=>(t=e)=>{let s="",r=t|0;for(;r--;)s+=i[Math.random()*i.length|0];return s},So=(i=21)=>{let e="",t=i|0;for(;t--;)e+=bo[Math.random()*64|0];return e};var Eo={nanoid:So,customAlphabet:Co};let{existsSync:xo,readFileSync:Ao}=W,{dirname:Lt,join:Ro}=W,{SourceMapConsumer:hi,SourceMapGenerator:fi}=W;function No(i){return Buffer?Buffer.from(i,"base64").toString():window.atob(i)}let is=class{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let s=t.map?t.map.prev:void 0,r=this.loadMap(t.from,s);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Lt(this.mapFile)),r&&(this.text=r)}consumer(){return this.consumerCache||(this.consumerCache=new hi(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,s=/^data:application\/json;base64,/,r=/^data:application\/json;charset=utf-?8,/,n=/^data:application\/json,/,o=e.match(r)||e.match(n);if(o)return decodeURIComponent(e.substr(o[0].length));let l=e.match(t)||e.match(s);if(l)return No(e.substr(l[0].length));let a=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+a)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/g);if(!t)return;let s=e.lastIndexOf(t.pop()),r=e.indexOf("*/",s);s>-1&&r>-1&&(this.annotation=this.getAnnotationURL(e.substring(s,r)))}loadFile(e){if(this.root=Lt(e),xo(e))return this.mapFile=e,Ao(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let s=t(e);if(s){let r=this.loadFile(s);if(!r)throw new Error("Unable to load previous source map: "+s.toString());return r}}else{if(t instanceof hi)return fi.fromSourceMap(t).toString();if(t instanceof fi)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let s=this.annotation;return e&&(s=Ro(Lt(e),s)),this.loadFile(s)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var Er=is;is.default=is;let{nanoid:Mo}=Eo,{isAbsolute:rs,resolve:ns}=W,{SourceMapConsumer:Io,SourceMapGenerator:Do}=W,{fileURLToPath:pi,pathToFileURL:Ue}=W,di=Ds,Oo=Er,Bt=W,Ft=Symbol("fromOffsetCache"),To=!!(Io&&Do),mi=!!(ns&&rs),ht=class{constructor(e,t={}){if(e===null||typeof e=="undefined"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!mi||/^\w+:\/\//.test(t.from)||rs(t.from)?this.file=t.from:this.file=ns(t.from)),mi&&To){let s=new Oo(this.css,t);if(s.text){this.map=s;let r=s.consumer().file;!this.file&&r&&(this.file=this.mapResolve(r))}}this.file||(this.id="<input css "+Mo(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,s,r={}){let n,o,l;if(t&&typeof t=="object"){let u=t,c=s;if(typeof u.offset=="number"){let f=this.fromOffset(u.offset);t=f.line,s=f.col}else t=u.line,s=u.column;if(typeof c.offset=="number"){let f=this.fromOffset(c.offset);o=f.line,n=f.col}else o=c.line,n=c.column}else if(!s){let u=this.fromOffset(t);t=u.line,s=u.col}let a=this.origin(t,s,o,n);return a?l=new di(e,a.endLine===void 0?a.line:{column:a.column,line:a.line},a.endLine===void 0?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,r.plugin):l=new di(e,o===void 0?t:{column:s,line:t},o===void 0?s:{column:n,line:o},this.css,this.file,r.plugin),l.input={column:s,endColumn:n,endLine:o,line:t,source:this.css},this.file&&(Ue&&(l.input.url=Ue(this.file).toString()),l.input.file=this.file),l}fromOffset(e){let t,s;if(this[Ft])s=this[Ft];else{let n=this.css.split(`
`);s=new Array(n.length);let o=0;for(let l=0,a=n.length;l<a;l++)s[l]=o,o+=n[l].length+1;this[Ft]=s}t=s[s.length-1];let r=0;if(e>=t)r=s.length-1;else{let n=s.length-2,o;for(;r<n;)if(o=r+(n-r>>1),e<s[o])n=o-1;else if(e>=s[o+1])r=o+1;else{r=o;break}}return{col:e-s[r]+1,line:r+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:ns(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,s,r){if(!this.map)return!1;let n=this.map.consumer(),o=n.originalPositionFor({column:t,line:e});if(!o.source)return!1;let l;typeof s=="number"&&(l=n.originalPositionFor({column:r,line:s}));let a;rs(o.source)?a=Ue(o.source):a=new URL(o.source,this.map.consumer().sourceRoot||Ue(this.map.mapFile));let u={column:o.column,endColumn:l&&l.column,endLine:l&&l.line,line:o.line,url:a.toString()};if(a.protocol==="file:")if(pi)u.file=pi(a);else throw new Error("file: protocol is not available in this PostCSS build");let c=n.sourceContentFor(o.source);return c&&(u.source=c),u}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map=D({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var Rt=ht;ht.default=ht;Bt&&Bt.registerInput&&Bt.registerInput(ht);let xr=se,Ar,Rr,le=class extends xr{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,s){let r=super.normalize(e);if(t){if(s==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let n of r)n.raws.before=t.raws.before}return r}removeChild(e,t){let s=this.index(e);return!t&&s===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[s].raws.before),super.removeChild(e)}toResult(e={}){return new Ar(new Rr,this,e).stringify()}};le.registerLazyResult=i=>{Ar=i};le.registerProcessor=i=>{Rr=i};var ke=le;le.default=le;xr.registerRoot(le);let Me={comma(i){return Me.split(i,[","],!0)},space(i){let e=[" ",`
`,"	"];return Me.split(i,e)},split(i,e,t){let s=[],r="",n=!1,o=0,l=!1,a="",u=!1;for(let c of i)u?u=!1:c==="\\"?u=!0:l?c===a&&(l=!1):c==='"'||c==="'"?(l=!0,a=c):c==="("?o+=1:c===")"?o>0&&(o-=1):o===0&&e.includes(c)&&(n=!0),n?(r!==""&&s.push(r.trim()),r="",n=!1):r+=c;return(t||r!=="")&&s.push(r.trim()),s}};var Nr=Me;Me.default=Me;let Mr=se,$o=Nr,ft=class extends Mr{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return $o.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,s=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(s)}};var _s=ft;ft.default=ft;Mr.registerRule(ft);let Po=$s,_o=xt,ko=At,Lo=Rt,Bo=Er,Fo=ke,Uo=_s;function Ie(i,e){if(Array.isArray(i))return i.map(o=>Ie(o));let r=i,{inputs:t}=r,s=me(r,["inputs"]);if(t){e=[];for(let o of t){let l=U(D({},o),{__proto__:Lo.prototype});l.map&&(l.map=U(D({},l.map),{__proto__:Bo.prototype})),e.push(l)}}if(s.nodes&&(s.nodes=i.nodes.map(o=>Ie(o,e))),s.source){let n=s.source,{inputId:o}=n,l=me(n,["inputId"]);s.source=l,o!=null&&(s.source.input=e[o])}if(s.type==="root")return new Fo(s);if(s.type==="decl")return new ko(s);if(s.type==="rule")return new Uo(s);if(s.type==="comment")return new _o(s);if(s.type==="atrule")return new Po(s);throw new Error("Unknown node type: "+i.type)}var Vo=Ie;Ie.default=Ie;let{dirname:ot,relative:Ir,resolve:Dr,sep:Or}=W,{SourceMapConsumer:Tr,SourceMapGenerator:at}=W,{pathToFileURL:gi}=W,Wo=Rt,zo=!!(Tr&&at),Go=!!(ot&&Dr&&Ir&&Or),Yo=class{constructor(e,t,s,r){this.stringify=e,this.mapOpts=s.map||{},this.root=t,this.opts=s,this.css=r,this.originalCSS=r,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),s=e.root||ot(e.file),r;this.mapOpts.sourcesContent===!1?(r=new Tr(e.text),r.sourcesContent&&(r.sourcesContent=null)):r=e.consumer(),this.map.applySourceMap(r,t,this.toUrl(this.path(s)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),Go&&zo&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=at.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new at({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new at({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,s="<no source>",r={generated:{column:0,line:0},original:{column:0,line:0},source:""},n,o;this.stringify(this.root,(l,a,u)=>{if(this.css+=l,a&&u!=="end"&&(r.generated.line=e,r.generated.column=t-1,a.source&&a.source.start?(r.source=this.sourcePath(a),r.original.line=a.source.start.line,r.original.column=a.source.start.column-1,this.map.addMapping(r)):(r.source=s,r.original.line=1,r.original.column=0,this.map.addMapping(r))),o=l.match(/\n/g),o?(e+=o.length,n=l.lastIndexOf(`
`),t=l.length-n):t+=l.length,a&&u!=="start"){let c=a.parent||{raws:{}};(!(a.type==="decl"||a.type==="atrule"&&!a.nodes)||a!==c.last||c.raws.semicolon)&&(a.source&&a.source.end?(r.source=this.sourcePath(a),r.original.line=a.source.end.line,r.original.column=a.source.end.column-1,r.generated.line=e,r.generated.column=t-2,this.map.addMapping(r)):(r.source=s,r.original.line=1,r.original.column=0,r.generated.line=e,r.generated.column=t-1,this.map.addMapping(r)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation!="undefined"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline!="undefined")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e!="undefined"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map!="undefined"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent!="undefined"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let s=this.opts.to?ot(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(s=ot(Dr(s,this.mapOpts.annotation)));let r=Ir(s,e);return this.memoizedPaths.set(e,r),r}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new Wo(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let s=t.source.input.from;if(s&&!e[s]){e[s]=!0;let r=this.usesFileUrls?this.toFileUrl(s):this.toUrl(this.path(s));this.map.setSourceContent(r,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(gi){let s=gi(e).toString();return this.memoizedFileURLs.set(e,s),s}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;Or==="\\"&&(e=e.replace(/\\/g,"/"));let s=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,s),s}};var $r=Yo;const Ut=39,yi=34,Ve=92,wi=47,We=10,we=32,ze=12,Ge=9,Ye=13,jo=91,Zo=93,Xo=40,Ho=41,Jo=123,Ko=125,Qo=59,qo=42,ea=58,ta=64,je=/[\t\n\f\r "#'()/;[\\\]{}]/g,Ze=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,sa=/.[\r\n"'(/\\]/,vi=/[\da-f]/i;var ia=function(e,t={}){let s=e.css.valueOf(),r=t.ignoreErrors,n,o,l,a,u,c,f,h,d,g,b=s.length,p=0,m=[],w=[];function v(){return p}function S(L){throw e.error("Unclosed "+L,p)}function $(){return w.length===0&&p>=b}function F(L){if(w.length)return w.pop();if(p>=b)return;let H=L?L.ignoreUnclosed:!1;switch(n=s.charCodeAt(p),n){case We:case we:case Ge:case Ye:case ze:{a=p;do a+=1,n=s.charCodeAt(a);while(n===we||n===We||n===Ge||n===Ye||n===ze);c=["space",s.slice(p,a)],p=a-1;break}case jo:case Zo:case Jo:case Ko:case ea:case Qo:case Ho:{let te=String.fromCharCode(n);c=[te,te,p];break}case Xo:{if(g=m.length?m.pop()[1]:"",d=s.charCodeAt(p+1),g==="url"&&d!==Ut&&d!==yi&&d!==we&&d!==We&&d!==Ge&&d!==ze&&d!==Ye){a=p;do{if(f=!1,a=s.indexOf(")",a+1),a===-1)if(r||H){a=p;break}else S("bracket");for(h=a;s.charCodeAt(h-1)===Ve;)h-=1,f=!f}while(f);c=["brackets",s.slice(p,a+1),p,a],p=a}else a=s.indexOf(")",p+1),o=s.slice(p,a+1),a===-1||sa.test(o)?c=["(","(",p]:(c=["brackets",o,p,a],p=a);break}case Ut:case yi:{u=n===Ut?"'":'"',a=p;do{if(f=!1,a=s.indexOf(u,a+1),a===-1)if(r||H){a=p+1;break}else S("string");for(h=a;s.charCodeAt(h-1)===Ve;)h-=1,f=!f}while(f);c=["string",s.slice(p,a+1),p,a],p=a;break}case ta:{je.lastIndex=p+1,je.test(s),je.lastIndex===0?a=s.length-1:a=je.lastIndex-2,c=["at-word",s.slice(p,a+1),p,a],p=a;break}case Ve:{for(a=p,l=!0;s.charCodeAt(a+1)===Ve;)a+=1,l=!l;if(n=s.charCodeAt(a+1),l&&n!==wi&&n!==we&&n!==We&&n!==Ge&&n!==Ye&&n!==ze&&(a+=1,vi.test(s.charAt(a)))){for(;vi.test(s.charAt(a+1));)a+=1;s.charCodeAt(a+1)===we&&(a+=1)}c=["word",s.slice(p,a+1),p,a],p=a;break}default:{n===wi&&s.charCodeAt(p+1)===qo?(a=s.indexOf("*/",p+2)+1,a===0&&(r||H?a=s.length:S("comment")),c=["comment",s.slice(p,a+1),p,a],p=a):(Ze.lastIndex=p+1,Ze.test(s),Ze.lastIndex===0?a=s.length-1:a=Ze.lastIndex-2,c=["word",s.slice(p,a+1),p,a],m.push(c),p=a);break}}return p++,c}function Y(L){w.push(L)}return{back:Y,endOfFile:$,nextToken:F,position:v}};let ra=$s,na=xt,oa=At,aa=ke,bi=_s,la=ia;const Ci={empty:!0,space:!0};function ua(i){for(let e=i.length-1;e>=0;e--){let t=i[e],s=t[3]||t[2];if(s)return s}}let ca=class{constructor(e){this.input=e,this.root=new aa,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new ra;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let s,r,n,o=!1,l=!1,a=[],u=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),s=e[0],s==="("||s==="["?u.push(s==="("?")":"]"):s==="{"&&u.length>0?u.push("}"):s===u[u.length-1]&&u.pop(),u.length===0)if(s===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(s==="{"){l=!0;break}else if(s==="}"){if(a.length>0){for(n=a.length-1,r=a[n];r&&r[0]==="space";)r=a[--n];r&&(t.source.end=this.getPosition(r[3]||r[2]),t.source.end.offset++)}this.end(e);break}else a.push(e);else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(t.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(t,"params",a),o&&(e=a[a.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),l&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let s=0,r;for(let n=t-1;n>=0&&(r=e[n],!(r[0]!=="space"&&(s+=1,s===2)));n--);throw this.input.error("Missed semicolon",r[0]==="word"?r[3]+1:r[2])}colon(e){let t=0,s,r,n;for(let[o,l]of e.entries()){if(r=l,n=r[0],n==="("&&(t+=1),n===")"&&(t-=1),t===0&&n===":")if(!s)this.doubleColon(r);else{if(s[0]==="word"&&s[1]==="progid")continue;return o}s=r}return!1}comment(e){let t=new na;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let s=e[1].slice(2,-2);if(/^\s*$/.test(s))t.text="",t.raws.left=s,t.raws.right="";else{let r=s.match(/^(\s*)([^]*\S)(\s*)$/);t.text=r[2],t.raws.left=r[1],t.raws.right=r[3]}}createTokenizer(){this.tokenizer=la(this.input)}decl(e,t){let s=new oa;this.init(s,e[0][2]);let r=e[e.length-1];for(r[0]===";"&&(this.semicolon=!0,e.pop()),s.source.end=this.getPosition(r[3]||r[2]||ua(e)),s.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),s.raws.before+=e.shift()[1];for(s.source.start=this.getPosition(e[0][2]),s.prop="";e.length;){let u=e[0][0];if(u===":"||u==="space"||u==="comment")break;s.prop+=e.shift()[1]}s.raws.between="";let n;for(;e.length;)if(n=e.shift(),n[0]===":"){s.raws.between+=n[1];break}else n[0]==="word"&&/\w/.test(n[1])&&this.unknownWord([n]),s.raws.between+=n[1];(s.prop[0]==="_"||s.prop[0]==="*")&&(s.raws.before+=s.prop[0],s.prop=s.prop.slice(1));let o=[],l;for(;e.length&&(l=e[0][0],!(l!=="space"&&l!=="comment"));)o.push(e.shift());this.precheckMissedSemicolon(e);for(let u=e.length-1;u>=0;u--){if(n=e[u],n[1].toLowerCase()==="!important"){s.important=!0;let c=this.stringFrom(e,u);c=this.spacesFromEnd(e)+c,c!==" !important"&&(s.raws.important=c);break}else if(n[1].toLowerCase()==="important"){let c=e.slice(0),f="";for(let h=u;h>0;h--){let d=c[h][0];if(f.trim().startsWith("!")&&d!=="space")break;f=c.pop()[1]+f}f.trim().startsWith("!")&&(s.important=!0,s.raws.important=f,e=c)}if(n[0]!=="space"&&n[0]!=="comment")break}e.some(u=>u[0]!=="space"&&u[0]!=="comment")&&(s.raws.between+=o.map(u=>u[1]).join(""),o=[]),this.raw(s,"value",o.concat(e),t),s.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new bi;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,s=null,r=!1,n=null,o=[],l=e[1].startsWith("--"),a=[],u=e;for(;u;){if(s=u[0],a.push(u),s==="("||s==="[")n||(n=u),o.push(s==="("?")":"]");else if(l&&r&&s==="{")n||(n=u),o.push("}");else if(o.length===0)if(s===";")if(r){this.decl(a,l);return}else break;else if(s==="{"){this.rule(a);return}else if(s==="}"){this.tokenizer.back(a.pop()),t=!0;break}else s===":"&&(r=!0);else s===o[o.length-1]&&(o.pop(),o.length===0&&(n=null));u=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(n),t&&r){if(!l)for(;a.length&&(u=a[a.length-1][0],!(u!=="space"&&u!=="comment"));)this.tokenizer.back(a.pop());this.decl(a,l)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,s,r){let n,o,l=s.length,a="",u=!0,c,f;for(let h=0;h<l;h+=1)n=s[h],o=n[0],o==="space"&&h===l-1&&!r?u=!1:o==="comment"?(f=s[h-1]?s[h-1][0]:"empty",c=s[h+1]?s[h+1][0]:"empty",!Ci[f]&&!Ci[c]?a.slice(-1)===","?u=!1:a+=n[1]:u=!1):a+=n[1];if(!u){let h=s.reduce((d,g)=>d+g[1],"");e.raws[t]={raw:h,value:a}}e[t]=a}rule(e){e.pop();let t=new bi;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)s=e.pop()[1]+s;return s}spacesAndCommentsFromStart(e){let t,s="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)s+=e.shift()[1];return s}spacesFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],t==="space");)s=e.pop()[1]+s;return s}stringFrom(e,t){let s="";for(let r=t;r<e.length;r++)s+=e[r][1];return e.splice(t,e.length-t),s}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};var ha=ca;let fa=se,pa=Rt,da=ha;function pt(i,e){let t=new pa(i,e),s=new da(t);try{s.parse()}catch(r){throw r}return s.root}var ks=pt;pt.default=pt;fa.registerParse(pt);let os=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let s=t.node.rangeBy(t);this.line=s.start.line,this.column=s.start.column,this.endLine=s.end.line,this.endColumn=s.end.column}for(let s in t)this[s]=t[s]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var Pr=os;os.default=os;let ma=Pr,as=class{constructor(e,t,s){this.processor=e,this.messages=[],this.root=t,this.opts=s,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let s=new ma(e,t);return this.messages.push(s),s}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}};var Ls=as;as.default=as;let ga=se,ya=Ps,wa=$r,va=ks,Si=Ls,ba=ke,Ca=St,{isClean:j,my:Sa}=_e;const Ea={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},xa={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Aa={Once:!0,postcssPlugin:!0,prepare:!0},ue=0;function ve(i){return typeof i=="object"&&typeof i.then=="function"}function _r(i){let e=!1,t=Ea[i.type];return i.type==="decl"?e=i.prop.toLowerCase():i.type==="atrule"&&(e=i.name.toLowerCase()),e&&i.append?[t,t+"-"+e,ue,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:i.append?[t,ue,t+"Exit"]:[t,t+"Exit"]}function Ei(i){let e;return i.type==="document"?e=["Document",ue,"DocumentExit"]:i.type==="root"?e=["Root",ue,"RootExit"]:e=_r(i),{eventIndex:0,events:e,iterator:0,node:i,visitorIndex:0,visitors:[]}}function ls(i){return i[j]=!1,i.nodes&&i.nodes.forEach(e=>ls(e)),i}let us={},ce=class kr{constructor(e,t,s){this.stringified=!1,this.processed=!1;let r;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))r=ls(t);else if(t instanceof kr||t instanceof Si)r=ls(t.root),t.map&&(typeof s.map=="undefined"&&(s.map={}),s.map.inline||(s.map.inline=!1),s.map.prev=t.map);else{let n=va;s.syntax&&(n=s.syntax.parse),s.parser&&(n=s.parser),n.parse&&(n=n.parse);try{r=n(t,s)}catch(o){this.processed=!0,this.error=o}r&&!r[Sa]&&ga.rebuild(r)}this.result=new Si(e,r,s),this.helpers=U(D({},us),{postcss:us,result:this.result}),this.plugins=this.processor.plugins.map(n=>typeof n=="object"&&n.prepare?D(D({},n),n.prepare(this.result)):n)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let s=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=s.postcssPlugin,e.setMessage()):s.postcssVersion}catch(r){console&&console.error&&console.error(r)}return e}prepareVisitors(){this.listeners={};let e=(t,s,r)=>{this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push([t,r])};for(let t of this.plugins)if(typeof t=="object")for(let s in t){if(!xa[s]&&/^[A-Z]/.test(s))throw new Error(`Unknown event ${s} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!Aa[s])if(typeof t[s]=="object")for(let r in t[s])r==="*"?e(t,s,t[s][r]):e(t,s+"-"+r.toLowerCase(),t[s][r]);else typeof t[s]=="function"&&e(t,s,t[s])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],s=this.runOnRoot(t);if(ve(s))try{await s}catch(r){throw this.handleError(r)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[j];){e[j]=!0;let t=[Ei(e)];for(;t.length>0;){let s=this.visitTick(t);if(ve(s))try{await s}catch(r){let n=t[t.length-1].node;throw this.handleError(r,n)}}}if(this.listeners.OnceExit)for(let[t,s]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let r=e.nodes.map(n=>s(n,this.helpers));await Promise.all(r)}else await s(e,this.helpers)}catch(r){throw this.handleError(r)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(s=>e.Once(s,this.helpers));return ve(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=Ca;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new wa(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(ve(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[j];)e[j]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[s,r]of e){this.result.lastPlugin=s;let n;try{n=r(t,this.helpers)}catch(o){throw this.handleError(o,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(ve(n))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:s,visitors:r}=t;if(s.type!=="root"&&s.type!=="document"&&!s.parent){e.pop();return}if(r.length>0&&t.visitorIndex<r.length){let[o,l]=r[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return l(s.toProxy(),this.helpers)}catch(a){throw this.handleError(a,s)}}if(t.iterator!==0){let o=t.iterator,l;for(;l=s.nodes[s.indexes[o]];)if(s.indexes[o]+=1,!l[j]){l[j]=!0,e.push(Ei(l));return}t.iterator=0,delete s.indexes[o]}let n=t.events;for(;t.eventIndex<n.length;){let o=n[t.eventIndex];if(t.eventIndex+=1,o===ue){s.nodes&&s.nodes.length&&(s[j]=!0,t.iterator=s.getIterator());return}else if(this.listeners[o]){t.visitors=this.listeners[o];return}}e.pop()}walkSync(e){e[j]=!0;let t=_r(e);for(let s of t)if(s===ue)e.nodes&&e.each(r=>{r[j]||this.walkSync(r)});else{let r=this.listeners[s];if(r&&this.visitSync(r,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};ce.registerPostcss=i=>{us=i};var Lr=ce;ce.default=ce;ba.registerLazyResult(ce);ya.registerLazyResult(ce);let Ra=$r,Na=ks;const Ma=Ls;let Ia=St;let cs=class{constructor(e,t,s){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=s,this._map=void 0;let r,n=Ia;this.result=new Ma(this._processor,r,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get(){return o.root}});let l=new Ra(n,r,this._opts,t);if(l.isMap()){let[a,u]=l.generate();a&&(this.result.css=a),u&&(this.result.map=u)}else l.clearAnnotation(),this.result.css=l.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=Na;try{e=t(this._css,this._opts)}catch(s){this.error=s}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var Da=cs;cs.default=cs;let Oa=Ps,Ta=Lr,$a=Da,Pa=ke,De=class{constructor(e=[]){this.version="8.4.49",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let s of e)if(s.postcss===!0?s=s():s.postcss&&(s=s.postcss),typeof s=="object"&&Array.isArray(s.plugins))t=t.concat(s.plugins);else if(typeof s=="object"&&s.postcssPlugin)t.push(s);else if(typeof s=="function")t.push(s);else if(!(typeof s=="object"&&(s.parse||s.stringify)))throw new Error(s+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new $a(this,e,t):new Ta(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var _a=De;De.default=De;Pa.registerProcessor(De);Oa.registerProcessor(De);let Br=$s,Fr=xt,ka=se,La=Ds,Ur=At,Vr=Ps,Ba=Vo,Fa=Rt,Ua=Lr,Va=Nr,Wa=Et,za=ks,Bs=_a,Ga=Ls,Wr=ke,zr=_s,Ya=St,ja=Pr;function M(...i){return i.length===1&&Array.isArray(i[0])&&(i=i[0]),new Bs(i)}M.plugin=function(e,t){let s=!1;function r(...o){console&&console.warn&&!s&&(s=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let l=t(...o);return l.postcssPlugin=e,l.postcssVersion=new Bs().version,l}let n;return Object.defineProperty(r,"postcss",{get(){return n||(n=r()),n}}),r.process=function(o,l,a){return M([r(a)]).process(o,l)},r};M.stringify=Ya;M.parse=za;M.fromJSON=Ba;M.list=Va;M.comment=i=>new Fr(i);M.atRule=i=>new Br(i);M.decl=i=>new Ur(i);M.rule=i=>new zr(i);M.root=i=>new Wr(i);M.document=i=>new Vr(i);M.CssSyntaxError=La;M.Declaration=Ur;M.Container=ka;M.Processor=Bs;M.Document=Vr;M.Comment=Fr;M.Warning=ja;M.AtRule=Br;M.Result=Ga;M.Input=Fa;M.Rule=zr;M.Root=Wr;M.Node=Wa;Ua.registerPostcss(M);var Za=M;M.default=M;const O=ro(Za);O.stringify;O.fromJSON;O.plugin;O.parse;O.list;O.document;O.comment;O.atRule;O.rule;O.decl;O.root;O.CssSyntaxError;O.Declaration;O.Container;O.Processor;O.Document;O.Comment;O.Warning;O.AtRule;O.Result;O.Input;O.Rule;O.Root;O.Node;const Xa=/(max|min)-device-(width|height)/,xi=new RegExp(Xa.source,"g"),Ha={postcssPlugin:"postcss-custom-selectors",prepare(){return{postcssPlugin:"postcss-custom-selectors",AtRule:function(i){i.params.match(xi)&&(i.params=i.params.replace(xi,"$1-$2"))}}}},Ja={postcssPlugin:"postcss-hover-classes",prepare:function(){const i=[];return{Rule:function(e){i.indexOf(e)===-1&&(i.push(e),e.selectors.forEach(function(t){t.includes(":hover")&&(e.selector+=`,
`+t.replace(/:hover/g,".\\:hover"))}))}}}},Ai={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function Ka(i){let e=Ai[i.tagName]?Ai[i.tagName]:i.tagName;return e==="link"&&i.attributes._cssText&&(e="style"),e}function Nt(i,e){const t=e==null?void 0:e.stylesWithHoverClass.get(i);if(t)return t;const r=O([Ha,Ja]).process(i).css;return e==null||e.stylesWithHoverClass.set(i,r),r}function Ri(){return{stylesWithHoverClass:new Map}}function Qa(i,e,t,s){const r=[];for(const o of i.childNodes)o.type===_.Text&&r.push(o);const n=e.split("/* rr_split */");for(;n.length>1&&n.length>r.length;)n.splice(-2,2,n.slice(-2).join(""));for(let o=0;o<r.length;o++){const l=r[o],a=n[o];l&&a&&(l.textContent=t?Nt(a,s):a)}}function qa(i,e,t,s){const{doc:r,hackCss:n,cache:o}=s;i.childNodes.length?Qa(i,t,n,o):(n&&(t=Nt(t,o)),e.appendChild(r.createTextNode(t)))}function el(i,e){var t,s,r;const{doc:n,hackCss:o,cache:l}=e;switch(i.type){case _.Document:return n.implementation.createDocument(null,"",null);case _.DocumentType:return n.implementation.createDocumentType(i.name||"html",i.publicId,i.systemId);case _.Element:{const a=Ka(i);let u;i.isSVG?u=n.createElementNS("http://www.w3.org/2000/svg",a):(i.isCustom&&((t=n.defaultView)!=null&&t.customElements)&&!n.defaultView.customElements.get(i.tagName)&&n.defaultView.customElements.define(i.tagName,class extends n.defaultView.HTMLElement{}),u=n.createElement(a));const c={};for(const f in i.attributes){if(!Object.prototype.hasOwnProperty.call(i.attributes,f))continue;let h=i.attributes[f];if(!(a==="option"&&f==="selected"&&h===!1)&&h!==null){if(h===!0&&(h=""),f.startsWith("rr_")){c[f]=h;continue}if(typeof h=="string"){if(a==="style"&&f==="_cssText"){qa(i,u,h,e);continue}else if(a==="textarea"&&f==="value"){u.appendChild(n.createTextNode(h)),i.childNodes=[];continue}}try{if(i.isSVG&&f==="xlink:href")u.setAttributeNS("http://www.w3.org/1999/xlink",f,h.toString());else if(f==="onload"||f==="onclick"||f.substring(0,7)==="onmouse")u.setAttribute("_"+f,h.toString());else if(a==="meta"&&i.attributes["http-equiv"]==="Content-Security-Policy"&&f==="content"){u.setAttribute("csp-content",h.toString());continue}else a==="link"&&(i.attributes.rel==="preload"||i.attributes.rel==="modulepreload")&&i.attributes.as==="script"||a==="link"&&i.attributes.rel==="prefetch"&&typeof i.attributes.href=="string"&&i.attributes.href.endsWith(".js")||(a==="img"&&i.attributes.srcset&&i.attributes.rr_dataURL?u.setAttribute("rrweb-original-srcset",i.attributes.srcset):u.setAttribute(f,h.toString()))}catch(d){}}}for(const f in c){const h=c[f];if(a==="canvas"&&f==="rr_dataURL"){const d=n.createElement("img");d.onload=()=>{const g=u.getContext("2d");g&&g.drawImage(d,0,0,d.width,d.height)},d.src=h.toString(),u.RRNodeType&&(u.rr_dataURL=h.toString())}else if(a==="img"&&f==="rr_dataURL"){const d=u;d.currentSrc.startsWith("data:")||(d.setAttribute("rrweb-original-src",i.attributes.src),d.src=h.toString())}if(f==="rr_width")u.style.setProperty("width",h.toString());else if(f==="rr_height")u.style.setProperty("height",h.toString());else if(f==="rr_mediaCurrentTime"&&typeof h=="number")u.currentTime=h;else if(f==="rr_mediaState")switch(h){case"played":u.play().catch(d=>console.warn("media playback error",d));break;case"paused":u.pause();break}else f==="rr_mediaPlaybackRate"&&typeof h=="number"?u.playbackRate=h:f==="rr_mediaMuted"&&typeof h=="boolean"?u.muted=h:f==="rr_mediaLoop"&&typeof h=="boolean"?u.loop=h:f==="rr_mediaVolume"&&typeof h=="number"?u.volume=h:f==="rr_open_mode"&&u.setAttribute("rr_open_mode",h)}if(i.isShadowHost)if(u.shadowRoot)for(;u.shadowRoot.firstChild;)u.shadowRoot.removeChild(u.shadowRoot.firstChild);else{const f=u.attachShadow({mode:"open"}),h=(s=u.ownerDocument)==null?void 0:s.defaultView;(r=i.adoptedStyleSheets)==null||r.forEach(d=>{if(!h)return;const g=new h.CSSStyleSheet;g.replaceSync(d),u.shadowRoot&&(f.adoptedStyleSheets=[g])})}return u}case _.Text:return i.isStyle&&o?n.createTextNode(Nt(i.textContent,l)):n.createTextNode(i.textContent);case _.CDATA:return n.createCDATASection(i.textContent);case _.Comment:return n.createComment(i.textContent);default:return null}}function Re(i,e){const{doc:t,mirror:s,skipChild:r=!1,hackCss:n=!0,afterAppend:o,cache:l}=e;if(s.has(i.id)){const u=s.getNode(i.id),c=s.getMeta(u);if(io(c,i))return s.getNode(i.id)}let a=el(i,{doc:t,hackCss:n,cache:l});if(!a)return null;if(i.rootId&&s.getNode(i.rootId)!==t&&s.replace(i.rootId,t),i.type===_.Document&&(t.close(),t.open(),i.compatMode==="BackCompat"&&i.childNodes&&i.childNodes[0].type!==_.DocumentType&&(i.childNodes[0].type===_.Element&&"xmlns"in i.childNodes[0].attributes&&i.childNodes[0].attributes.xmlns==="http://www.w3.org/1999/xhtml"?t.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):t.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),a=t),s.add(a,i),(i.type===_.Document||i.type===_.Element)&&!r)for(const u of i.childNodes){const c=Re(u,{doc:t,mirror:s,skipChild:!1,hackCss:n,afterAppend:o,cache:l});if(!c){console.warn("Failed to rebuild",u);continue}if(u.isShadow&&to(a)&&a.shadowRoot)a.shadowRoot.appendChild(c);else if(i.type===_.Document&&u.type==_.Element){const f=c;let h=null;f.childNodes.forEach(d=>{d.nodeName==="BODY"&&(h=d)}),h?(f.removeChild(h),a.appendChild(c),f.appendChild(h)):a.appendChild(c)}else a.appendChild(c);o&&o(c,u.id)}return a}function tl(i,e){function t(s){e(s)}for(const s of i.getIds())i.has(s)&&t(i.getNode(s))}function sl(i,e){const t=e.getMeta(i);if((t==null?void 0:t.type)!==_.Element)return;const s=i;for(const r in t.attributes){if(!(Object.prototype.hasOwnProperty.call(t.attributes,r)&&r.startsWith("rr_")))continue;const n=t.attributes[r];r==="rr_scrollLeft"&&(s.scrollLeft=n),r==="rr_scrollTop"&&(s.scrollTop=n)}}function il(i,e){const{doc:t,onVisit:s,hackCss:r=!0,afterAppend:n,cache:o,mirror:l=new or}=e,a=Re(i,{doc:t,mirror:l,skipChild:!1,hackCss:r,afterAppend:n,cache:o});return tl(l,u=>{s&&s(u),sl(u,l)}),a}var rl=Object.defineProperty,nl=(i,e,t)=>e in i?rl(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,y=(i,e,t)=>nl(i,typeof e!="symbol"?e+"":e,t),ol=Object.defineProperty,al=(i,e,t)=>e in i?ol(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ni=(i,e,t)=>al(i,typeof e!="symbol"?e+"":e,t);let ll=class{constructor(){Ni(this,"idNodeMap",new Map),Ni(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;const s=(t=this.getMeta(e))==null?void 0:t.id;return s!=null?s:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(s=>this.removeNodeFromMap(s))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const s=t.id;this.idNodeMap.set(s,e),this.nodeMetaMap.set(e,t)}replace(e,t){const s=this.getNode(e);if(s){const r=this.nodeMetaMap.get(s);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function ul(){return new ll}function cl(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function hl(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(s){var r=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return i[s]}})}),t}var Fs={exports:{}},x=String,Gr=function(){return{isColorSupported:!1,reset:x,bold:x,dim:x,italic:x,underline:x,inverse:x,hidden:x,strikethrough:x,black:x,red:x,green:x,yellow:x,blue:x,magenta:x,cyan:x,white:x,gray:x,bgBlack:x,bgRed:x,bgGreen:x,bgYellow:x,bgBlue:x,bgMagenta:x,bgCyan:x,bgWhite:x,blackBright:x,redBright:x,greenBright:x,yellowBright:x,blueBright:x,magentaBright:x,cyanBright:x,whiteBright:x,bgBlackBright:x,bgRedBright:x,bgGreenBright:x,bgYellowBright:x,bgBlueBright:x,bgMagentaBright:x,bgCyanBright:x,bgWhiteBright:x}};Fs.exports=Gr();Fs.exports.createColors=Gr;var fl=Fs.exports;const pl={},dl=Object.freeze(Object.defineProperty({__proto__:null,default:pl},Symbol.toStringTag,{value:"Module"})),z=hl(dl);let Mi=fl,Ii=z,hs=class Yr extends Error{constructor(e,t,s,r,n,o){super(e),this.name="CssSyntaxError",this.reason=e,n&&(this.file=n),r&&(this.source=r),o&&(this.plugin=o),typeof t!="undefined"&&typeof s!="undefined"&&(typeof t=="number"?(this.line=t,this.column=s):(this.line=t.line,this.column=t.column,this.endLine=s.line,this.endColumn=s.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,Yr)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line!="undefined"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=Mi.isColorSupported);let s=c=>c,r=c=>c,n=c=>c;if(e){let{bold:c,gray:f,red:h}=Mi.createColors(!0);r=d=>c(h(d)),s=d=>f(d),Ii&&(n=d=>Ii(d))}let o=t.split(/\r?\n/),l=Math.max(this.line-3,0),a=Math.min(this.line+2,o.length),u=String(a).length;return o.slice(l,a).map((c,f)=>{let h=l+1+f,d=" "+(" "+h).slice(-u)+" | ";if(h===this.line){if(c.length>160){let b=20,p=Math.max(0,this.column-b),m=Math.max(this.column+b,this.endColumn+b),w=c.slice(p,m),v=s(d.replace(/\d/g," "))+c.slice(0,Math.min(this.column-1,b-1)).replace(/[^\t]/g," ");return r(">")+s(d)+n(w)+`
 `+v+r("^")}let g=s(d.replace(/\d/g," "))+c.slice(0,this.column-1).replace(/[^\t]/g," ");return r(">")+s(d)+n(c)+`
 `+g+r("^")}return" "+s(d)+n(c)}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}};var Us=hs;hs.default=hs;const Di={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function ml(i){return i[0].toUpperCase()+i.slice(1)}let fs=class{constructor(e){this.builder=e}atrule(e,t){let s="@"+e.name,r=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName!="undefined"?s+=e.raws.afterName:r&&(s+=" "),e.nodes)this.block(e,s+r);else{let n=(e.raws.between||"")+(t?";":"");this.builder(s+r+n,e)}}beforeAfter(e,t){let s;e.type==="decl"?s=this.raw(e,null,"beforeDecl"):e.type==="comment"?s=this.raw(e,null,"beforeComment"):t==="before"?s=this.raw(e,null,"beforeRule"):s=this.raw(e,null,"beforeClose");let r=e.parent,n=0;for(;r&&r.type!=="root";)n+=1,r=r.parent;if(s.includes(`
`)){let o=this.raw(e,null,"indent");if(o.length)for(let l=0;l<n;l++)s+=o}return s}block(e,t){let s=this.raw(e,"between","beforeOpen");this.builder(t+s+"{",e,"start");let r;e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let s=this.raw(e,"semicolon");for(let r=0;r<e.nodes.length;r++){let n=e.nodes[r],o=this.raw(n,"before");o&&this.builder(o),this.stringify(n,t!==r||s)}}comment(e){let t=this.raw(e,"left","commentLeft"),s=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+s+"*/",e)}decl(e,t){let s=this.raw(e,"between","colon"),r=e.prop+s+this.rawValue(e,"value");e.important&&(r+=e.raws.important||" !important"),t&&(r+=";"),this.builder(r,e)}document(e){this.body(e)}raw(e,t,s){let r;if(s||(s=t),t&&(r=e.raws[t],typeof r!="undefined"))return r;let n=e.parent;if(s==="before"&&(!n||n.type==="root"&&n.first===e||n&&n.type==="document"))return"";if(!n)return Di[s];let o=e.root();if(o.rawCache||(o.rawCache={}),typeof o.rawCache[s]!="undefined")return o.rawCache[s];if(s==="before"||s==="after")return this.beforeAfter(e,s);{let l="raw"+ml(s);this[l]?r=this[l](o,e):o.walk(a=>{if(r=a.raws[t],typeof r!="undefined")return!1})}return typeof r=="undefined"&&(r=Di[s]),o.rawCache[s]=r,r}rawBeforeClose(e){let t;return e.walk(s=>{if(s.nodes&&s.nodes.length>0&&typeof s.raws.after!="undefined")return t=s.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let s;return e.walkComments(r=>{if(typeof r.raws.before!="undefined")return s=r.raws.before,s.includes(`
`)&&(s=s.replace(/[^\n]+$/,"")),!1}),typeof s=="undefined"?s=this.raw(t,null,"beforeDecl"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeDecl(e,t){let s;return e.walkDecls(r=>{if(typeof r.raws.before!="undefined")return s=r.raws.before,s.includes(`
`)&&(s=s.replace(/[^\n]+$/,"")),!1}),typeof s=="undefined"?s=this.raw(t,null,"beforeRule"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeOpen(e){let t;return e.walk(s=>{if(s.type!=="decl"&&(t=s.raws.between,typeof t!="undefined"))return!1}),t}rawBeforeRule(e){let t;return e.walk(s=>{if(s.nodes&&(s.parent!==e||e.first!==s)&&typeof s.raws.before!="undefined")return t=s.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(s=>{if(typeof s.raws.between!="undefined")return t=s.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(s=>{if(s.nodes&&s.nodes.length===0&&(t=s.raws.after,typeof t!="undefined"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(s=>{let r=s.parent;if(r&&r!==e&&r.parent&&r.parent===e&&typeof s.raws.before!="undefined"){let n=s.raws.before.split(`
`);return t=n[n.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(s=>{if(s.nodes&&s.nodes.length&&s.last.type==="decl"&&(t=s.raws.semicolon,typeof t!="undefined"))return!1}),t}rawValue(e,t){let s=e[t],r=e.raws[t];return r&&r.value===s?r.raw:s}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var jr=fs;fs.default=fs;let gl=jr;function ps(i,e){new gl(e).stringify(i)}var Mt=ps;ps.default=ps;var Le={};Le.isClean=Symbol("isClean");Le.my=Symbol("my");let yl=Us,wl=jr,vl=Mt,{isClean:be,my:bl}=Le;function ds(i,e){let t=new i.constructor;for(let s in i){if(!Object.prototype.hasOwnProperty.call(i,s)||s==="proxyCache")continue;let r=i[s],n=typeof r;s==="parent"&&n==="object"?e&&(t[s]=e):s==="source"?t[s]=r:Array.isArray(r)?t[s]=r.map(o=>ds(o,t)):(n==="object"&&r!==null&&(r=ds(r)),t[s]=r)}return t}function Ce(i,e){if(e&&typeof e.offset!="undefined")return e.offset;let t=1,s=1,r=0;for(let n=0;n<i.length;n++){if(s===e.line&&t===e.column){r=n;break}i[n]===`
`?(t=1,s+=1):t+=1}return r}let ms=class{constructor(e={}){this.raws={},this[be]=!1,this[bl]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let s of e[t])typeof s.clone=="function"?this.append(s.clone()):this.append(s)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=ds(this);for(let s in e)t[s]=e[s];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:s,start:r}=this.rangeBy(t);return this.source.input.error(e,{column:r.column,line:r.line},{column:s.column,line:s.line},t)}return new yl(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,s){return e[t]===s||(e[t]=s,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markClean(){this[be]=!0}markDirty(){if(this[be]){this[be]=!1;let e=this;for(;e=e.parent;)e[be]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let r=this.source.input.css.slice(Ce(this.source.input.css,this.source.start),Ce(this.source.input.css,this.source.end)).indexOf(e.word);r!==-1&&(t=this.positionInside(r))}return t}positionInside(e){let t=this.source.start.column,s=this.source.start.line,r=Ce(this.source.input.css,this.source.start),n=r+e;for(let o=r;o<n;o++)this.source.input.css[o]===`
`?(t=1,s+=1):t+=1;return{column:t,line:s}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},s=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let n=this.source.input.css.slice(Ce(this.source.input.css,this.source.start),Ce(this.source.input.css,this.source.end)).indexOf(e.word);n!==-1&&(t=this.positionInside(n),s=this.positionInside(n+e.word.length))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?s={column:e.end.column,line:e.end.line}:typeof e.endIndex=="number"?s=this.positionInside(e.endIndex):e.index&&(s=this.positionInside(e.index+1));return(s.line<t.line||s.line===t.line&&s.column<=t.column)&&(s={column:t.column+1,line:t.line}),{end:s,start:t}}raw(e,t){return new wl().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,s=!1;for(let r of e)r===this?s=!0:s?(this.parent.insertAfter(t,r),t=r):this.parent.insertBefore(t,r);s||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let s={},r=t==null;t=t||new Map;let n=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o)||o==="parent"||o==="proxyCache")continue;let l=this[o];if(Array.isArray(l))s[o]=l.map(a=>typeof a=="object"&&a.toJSON?a.toJSON(null,t):a);else if(typeof l=="object"&&l.toJSON)s[o]=l.toJSON(null,t);else if(o==="source"){let a=t.get(l.input);a==null&&(a=n,t.set(l.input,n),n++),s[o]={end:l.end,inputId:a,start:l.start}}else s[o]=l}return r&&(s.inputs=[...t.keys()].map(o=>o.toJSON())),s}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=vl){e.stringify&&(e=e.stringify);let t="";return e(this,s=>{t+=s}),t}warn(e,t,s){let r={node:this};for(let n in s)r[n]=s[n];return e.warn(t,r)}get proxyOf(){return this}};var It=ms;ms.default=ms;let Cl=It,gs=class extends Cl{constructor(e){super(e),this.type="comment"}};var Dt=gs;gs.default=gs;let Sl=It,ys=class extends Sl{constructor(e){e&&typeof e.value!="undefined"&&typeof e.value!="string"&&(e=U(D({},e),{value:String(e.value)})),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var Ot=ys;ys.default=ys;let Zr=Dt,Xr=Ot,El=It,{isClean:Hr,my:Jr}=Le,Vs,Kr,Qr,Ws;function qr(i){return i.map(e=>(e.nodes&&(e.nodes=qr(e.nodes)),delete e.source,e))}function en(i){if(i[Hr]=!1,i.proxyOf.nodes)for(let e of i.proxyOf.nodes)en(e)}let K=class tn extends El{append(...e){for(let t of e){let s=this.normalize(t,this.last);for(let r of s)this.proxyOf.nodes.push(r)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),s,r;for(;this.indexes[t]<this.proxyOf.nodes.length&&(s=this.indexes[t],r=e(this.proxyOf.nodes[s],s),r!==!1);)this.indexes[t]+=1;return delete this.indexes[t],r}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...s)=>e[t](...s.map(r=>typeof r=="function"?(n,o)=>r(n.toProxy(),o):r)):t==="every"||t==="some"?s=>e[t]((r,...n)=>s(r.toProxy(),...n)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(s=>s.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,s){return e[t]===s||(e[t]=s,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let s=this.index(e),r=this.normalize(t,this.proxyOf.nodes[s]).reverse();s=this.index(e);for(let o of r)this.proxyOf.nodes.splice(s+1,0,o);let n;for(let o in this.indexes)n=this.indexes[o],s<n&&(this.indexes[o]=n+r.length);return this.markDirty(),this}insertBefore(e,t){let s=this.index(e),r=s===0?"prepend":!1,n=this.normalize(t,this.proxyOf.nodes[s],r).reverse();s=this.index(e);for(let l of n)this.proxyOf.nodes.splice(s,0,l);let o;for(let l in this.indexes)o=this.indexes[l],s<=o&&(this.indexes[l]=o+n.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=qr(Kr(e).nodes);else if(typeof e=="undefined")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let r of e)r.parent&&r.parent.removeChild(r,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let r of e)r.parent&&r.parent.removeChild(r,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value=="undefined")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new Xr(e)]}else if(e.selector||e.selectors)e=[new Ws(e)];else if(e.name)e=[new Vs(e)];else if(e.text)e=[new Zr(e)];else throw new Error("Unknown node type in node creation");return e.map(r=>(r[Jr]||tn.rebuild(r),r=r.proxyOf,r.parent&&r.parent.removeChild(r),r[Hr]&&en(r),r.raws||(r.raws={}),typeof r.raws.before=="undefined"&&t&&typeof t.raws.before!="undefined"&&(r.raws.before=t.raws.before.replace(/\S/g,"")),r.parent=this.proxyOf,r))}prepend(...e){e=e.reverse();for(let t of e){let s=this.normalize(t,this.first,"prepend").reverse();for(let r of s)this.proxyOf.nodes.unshift(r);for(let r in this.indexes)this.indexes[r]=this.indexes[r]+s.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let s in this.indexes)t=this.indexes[s],t>=e&&(this.indexes[s]=t-1);return this.markDirty(),this}replaceValues(e,t,s){return s||(s=t,t={}),this.walkDecls(r=>{t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,s))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,s)=>{let r;try{r=e(t,s)}catch(n){throw t.addToError(n)}return r!==!1&&t.walk&&(r=t.walk(e)),r})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if(s.type==="atrule"&&e.test(s.name))return t(s,r)}):this.walk((s,r)=>{if(s.type==="atrule"&&s.name===e)return t(s,r)}):(t=e,this.walk((s,r)=>{if(s.type==="atrule")return t(s,r)}))}walkComments(e){return this.walk((t,s)=>{if(t.type==="comment")return e(t,s)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if(s.type==="decl"&&e.test(s.prop))return t(s,r)}):this.walk((s,r)=>{if(s.type==="decl"&&s.prop===e)return t(s,r)}):(t=e,this.walk((s,r)=>{if(s.type==="decl")return t(s,r)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if(s.type==="rule"&&e.test(s.selector))return t(s,r)}):this.walk((s,r)=>{if(s.type==="rule"&&s.selector===e)return t(s,r)}):(t=e,this.walk((s,r)=>{if(s.type==="rule")return t(s,r)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};K.registerParse=i=>{Kr=i};K.registerRule=i=>{Ws=i};K.registerAtRule=i=>{Vs=i};K.registerRoot=i=>{Qr=i};var ie=K;K.default=K;K.rebuild=i=>{i.type==="atrule"?Object.setPrototypeOf(i,Vs.prototype):i.type==="rule"?Object.setPrototypeOf(i,Ws.prototype):i.type==="decl"?Object.setPrototypeOf(i,Xr.prototype):i.type==="comment"?Object.setPrototypeOf(i,Zr.prototype):i.type==="root"&&Object.setPrototypeOf(i,Qr.prototype),i[Jr]=!0,i.nodes&&i.nodes.forEach(e=>{K.rebuild(e)})};let sn=ie,dt=class extends sn{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var zs=dt;dt.default=dt;sn.registerAtRule(dt);let xl=ie,rn,nn,Oe=class extends xl{constructor(e){super(D({type:"document"},e)),this.nodes||(this.nodes=[])}toResult(e={}){return new rn(new nn,this,e).stringify()}};Oe.registerLazyResult=i=>{rn=i};Oe.registerProcessor=i=>{nn=i};var Gs=Oe;Oe.default=Oe;let Al="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Rl=(i,e=21)=>(t=e)=>{let s="",r=t|0;for(;r--;)s+=i[Math.random()*i.length|0];return s},Nl=(i=21)=>{let e="",t=i|0;for(;t--;)e+=Al[Math.random()*64|0];return e};var Ml={nanoid:Nl,customAlphabet:Rl};let{existsSync:Il,readFileSync:Dl}=z,{dirname:Vt,join:Ol}=z,{SourceMapConsumer:Oi,SourceMapGenerator:Ti}=z;function Tl(i){return Buffer?Buffer.from(i,"base64").toString():window.atob(i)}let ws=class{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let s=t.map?t.map.prev:void 0,r=this.loadMap(t.from,s);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Vt(this.mapFile)),r&&(this.text=r)}consumer(){return this.consumerCache||(this.consumerCache=new Oi(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,s=/^data:application\/json;base64,/,r=/^data:application\/json;charset=utf-?8,/,n=/^data:application\/json,/,o=e.match(r)||e.match(n);if(o)return decodeURIComponent(e.substr(o[0].length));let l=e.match(t)||e.match(s);if(l)return Tl(e.substr(l[0].length));let a=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+a)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/g);if(!t)return;let s=e.lastIndexOf(t.pop()),r=e.indexOf("*/",s);s>-1&&r>-1&&(this.annotation=this.getAnnotationURL(e.substring(s,r)))}loadFile(e){if(this.root=Vt(e),Il(e))return this.mapFile=e,Dl(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let s=t(e);if(s){let r=this.loadFile(s);if(!r)throw new Error("Unable to load previous source map: "+s.toString());return r}}else{if(t instanceof Oi)return Ti.fromSourceMap(t).toString();if(t instanceof Ti)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let s=this.annotation;return e&&(s=Ol(Vt(e),s)),this.loadFile(s)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var on=ws;ws.default=ws;let{nanoid:$l}=Ml,{isAbsolute:vs,resolve:bs}=z,{SourceMapConsumer:Pl,SourceMapGenerator:_l}=z,{fileURLToPath:$i,pathToFileURL:Xe}=z,Pi=Us,kl=on,Wt=z,zt=Symbol("fromOffsetCache"),Ll=!!(Pl&&_l),_i=!!(bs&&vs),mt=class{constructor(e,t={}){if(e===null||typeof e=="undefined"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!_i||/^\w+:\/\//.test(t.from)||vs(t.from)?this.file=t.from:this.file=bs(t.from)),_i&&Ll){let s=new kl(this.css,t);if(s.text){this.map=s;let r=s.consumer().file;!this.file&&r&&(this.file=this.mapResolve(r))}}this.file||(this.id="<input css "+$l(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,s,r={}){let n,o,l;if(t&&typeof t=="object"){let u=t,c=s;if(typeof u.offset=="number"){let f=this.fromOffset(u.offset);t=f.line,s=f.col}else t=u.line,s=u.column;if(typeof c.offset=="number"){let f=this.fromOffset(c.offset);o=f.line,n=f.col}else o=c.line,n=c.column}else if(!s){let u=this.fromOffset(t);t=u.line,s=u.col}let a=this.origin(t,s,o,n);return a?l=new Pi(e,a.endLine===void 0?a.line:{column:a.column,line:a.line},a.endLine===void 0?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,r.plugin):l=new Pi(e,o===void 0?t:{column:s,line:t},o===void 0?s:{column:n,line:o},this.css,this.file,r.plugin),l.input={column:s,endColumn:n,endLine:o,line:t,source:this.css},this.file&&(Xe&&(l.input.url=Xe(this.file).toString()),l.input.file=this.file),l}fromOffset(e){let t,s;if(this[zt])s=this[zt];else{let n=this.css.split(`
`);s=new Array(n.length);let o=0;for(let l=0,a=n.length;l<a;l++)s[l]=o,o+=n[l].length+1;this[zt]=s}t=s[s.length-1];let r=0;if(e>=t)r=s.length-1;else{let n=s.length-2,o;for(;r<n;)if(o=r+(n-r>>1),e<s[o])n=o-1;else if(e>=s[o+1])r=o+1;else{r=o;break}}return{col:e-s[r]+1,line:r+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:bs(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,s,r){if(!this.map)return!1;let n=this.map.consumer(),o=n.originalPositionFor({column:t,line:e});if(!o.source)return!1;let l;typeof s=="number"&&(l=n.originalPositionFor({column:r,line:s}));let a;vs(o.source)?a=Xe(o.source):a=new URL(o.source,this.map.consumer().sourceRoot||Xe(this.map.mapFile));let u={column:o.column,endColumn:l&&l.column,endLine:l&&l.line,line:o.line,url:a.toString()};if(a.protocol==="file:")if($i)u.file=$i(a);else throw new Error("file: protocol is not available in this PostCSS build");let c=n.sourceContentFor(o.source);return c&&(u.source=c),u}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map=D({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var Tt=mt;mt.default=mt;Wt&&Wt.registerInput&&Wt.registerInput(mt);let an=ie,ln,un,he=class extends an{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,s){let r=super.normalize(e);if(t){if(s==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let n of r)n.raws.before=t.raws.before}return r}removeChild(e,t){let s=this.index(e);return!t&&s===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[s].raws.before),super.removeChild(e)}toResult(e={}){return new ln(new un,this,e).stringify()}};he.registerLazyResult=i=>{ln=i};he.registerProcessor=i=>{un=i};var Be=he;he.default=he;an.registerRoot(he);let Te={comma(i){return Te.split(i,[","],!0)},space(i){let e=[" ",`
`,"	"];return Te.split(i,e)},split(i,e,t){let s=[],r="",n=!1,o=0,l=!1,a="",u=!1;for(let c of i)u?u=!1:c==="\\"?u=!0:l?c===a&&(l=!1):c==='"'||c==="'"?(l=!0,a=c):c==="("?o+=1:c===")"?o>0&&(o-=1):o===0&&e.includes(c)&&(n=!0),n?(r!==""&&s.push(r.trim()),r="",n=!1):r+=c;return(t||r!=="")&&s.push(r.trim()),s}};var cn=Te;Te.default=Te;let hn=ie,Bl=cn,gt=class extends hn{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return Bl.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,s=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(s)}};var Ys=gt;gt.default=gt;hn.registerRule(gt);let Fl=zs,Ul=Dt,Vl=Ot,Wl=Tt,zl=on,Gl=Be,Yl=Ys;function $e(i,e){if(Array.isArray(i))return i.map(o=>$e(o));let r=i,{inputs:t}=r,s=me(r,["inputs"]);if(t){e=[];for(let o of t){let l=U(D({},o),{__proto__:Wl.prototype});l.map&&(l.map=U(D({},l.map),{__proto__:zl.prototype})),e.push(l)}}if(s.nodes&&(s.nodes=i.nodes.map(o=>$e(o,e))),s.source){let n=s.source,{inputId:o}=n,l=me(n,["inputId"]);s.source=l,o!=null&&(s.source.input=e[o])}if(s.type==="root")return new Gl(s);if(s.type==="decl")return new Vl(s);if(s.type==="rule")return new Yl(s);if(s.type==="comment")return new Ul(s);if(s.type==="atrule")return new Fl(s);throw new Error("Unknown node type: "+i.type)}var jl=$e;$e.default=$e;let{dirname:lt,relative:fn,resolve:pn,sep:dn}=z,{SourceMapConsumer:mn,SourceMapGenerator:ut}=z,{pathToFileURL:ki}=z,Zl=Tt,Xl=!!(mn&&ut),Hl=!!(lt&&pn&&fn&&dn),Jl=class{constructor(e,t,s,r){this.stringify=e,this.mapOpts=s.map||{},this.root=t,this.opts=s,this.css=r,this.originalCSS=r,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),s=e.root||lt(e.file),r;this.mapOpts.sourcesContent===!1?(r=new mn(e.text),r.sourcesContent&&(r.sourcesContent=null)):r=e.consumer(),this.map.applySourceMap(r,t,this.toUrl(this.path(s)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),Hl&&Xl&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=ut.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new ut({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new ut({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,s="<no source>",r={generated:{column:0,line:0},original:{column:0,line:0},source:""},n,o;this.stringify(this.root,(l,a,u)=>{if(this.css+=l,a&&u!=="end"&&(r.generated.line=e,r.generated.column=t-1,a.source&&a.source.start?(r.source=this.sourcePath(a),r.original.line=a.source.start.line,r.original.column=a.source.start.column-1,this.map.addMapping(r)):(r.source=s,r.original.line=1,r.original.column=0,this.map.addMapping(r))),o=l.match(/\n/g),o?(e+=o.length,n=l.lastIndexOf(`
`),t=l.length-n):t+=l.length,a&&u!=="start"){let c=a.parent||{raws:{}};(!(a.type==="decl"||a.type==="atrule"&&!a.nodes)||a!==c.last||c.raws.semicolon)&&(a.source&&a.source.end?(r.source=this.sourcePath(a),r.original.line=a.source.end.line,r.original.column=a.source.end.column-1,r.generated.line=e,r.generated.column=t-2,this.map.addMapping(r)):(r.source=s,r.original.line=1,r.original.column=0,r.generated.line=e,r.generated.column=t-1,this.map.addMapping(r)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation!="undefined"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline!="undefined")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e!="undefined"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map!="undefined"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent!="undefined"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let s=this.opts.to?lt(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(s=lt(pn(s,this.mapOpts.annotation)));let r=fn(s,e);return this.memoizedPaths.set(e,r),r}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new Zl(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let s=t.source.input.from;if(s&&!e[s]){e[s]=!0;let r=this.usesFileUrls?this.toFileUrl(s):this.toUrl(this.path(s));this.map.setSourceContent(r,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(ki){let s=ki(e).toString();return this.memoizedFileURLs.set(e,s),s}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;dn==="\\"&&(e=e.replace(/\\/g,"/"));let s=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,s),s}};var gn=Jl;const Gt=39,Li=34,He=92,Bi=47,Je=10,Se=32,Ke=12,Qe=9,qe=13,Kl=91,Ql=93,ql=40,eu=41,tu=123,su=125,iu=59,ru=42,nu=58,ou=64,et=/[\t\n\f\r "#'()/;[\\\]{}]/g,tt=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,au=/.[\r\n"'(/\\]/,Fi=/[\da-f]/i;var lu=function(e,t={}){let s=e.css.valueOf(),r=t.ignoreErrors,n,o,l,a,u,c,f,h,d,g,b=s.length,p=0,m=[],w=[];function v(){return p}function S(L){throw e.error("Unclosed "+L,p)}function $(){return w.length===0&&p>=b}function F(L){if(w.length)return w.pop();if(p>=b)return;let H=L?L.ignoreUnclosed:!1;switch(n=s.charCodeAt(p),n){case Je:case Se:case Qe:case qe:case Ke:{a=p;do a+=1,n=s.charCodeAt(a);while(n===Se||n===Je||n===Qe||n===qe||n===Ke);c=["space",s.slice(p,a)],p=a-1;break}case Kl:case Ql:case tu:case su:case nu:case iu:case eu:{let te=String.fromCharCode(n);c=[te,te,p];break}case ql:{if(g=m.length?m.pop()[1]:"",d=s.charCodeAt(p+1),g==="url"&&d!==Gt&&d!==Li&&d!==Se&&d!==Je&&d!==Qe&&d!==Ke&&d!==qe){a=p;do{if(f=!1,a=s.indexOf(")",a+1),a===-1)if(r||H){a=p;break}else S("bracket");for(h=a;s.charCodeAt(h-1)===He;)h-=1,f=!f}while(f);c=["brackets",s.slice(p,a+1),p,a],p=a}else a=s.indexOf(")",p+1),o=s.slice(p,a+1),a===-1||au.test(o)?c=["(","(",p]:(c=["brackets",o,p,a],p=a);break}case Gt:case Li:{u=n===Gt?"'":'"',a=p;do{if(f=!1,a=s.indexOf(u,a+1),a===-1)if(r||H){a=p+1;break}else S("string");for(h=a;s.charCodeAt(h-1)===He;)h-=1,f=!f}while(f);c=["string",s.slice(p,a+1),p,a],p=a;break}case ou:{et.lastIndex=p+1,et.test(s),et.lastIndex===0?a=s.length-1:a=et.lastIndex-2,c=["at-word",s.slice(p,a+1),p,a],p=a;break}case He:{for(a=p,l=!0;s.charCodeAt(a+1)===He;)a+=1,l=!l;if(n=s.charCodeAt(a+1),l&&n!==Bi&&n!==Se&&n!==Je&&n!==Qe&&n!==qe&&n!==Ke&&(a+=1,Fi.test(s.charAt(a)))){for(;Fi.test(s.charAt(a+1));)a+=1;s.charCodeAt(a+1)===Se&&(a+=1)}c=["word",s.slice(p,a+1),p,a],p=a;break}default:{n===Bi&&s.charCodeAt(p+1)===ru?(a=s.indexOf("*/",p+2)+1,a===0&&(r||H?a=s.length:S("comment")),c=["comment",s.slice(p,a+1),p,a],p=a):(tt.lastIndex=p+1,tt.test(s),tt.lastIndex===0?a=s.length-1:a=tt.lastIndex-2,c=["word",s.slice(p,a+1),p,a],m.push(c),p=a);break}}return p++,c}function Y(L){w.push(L)}return{back:Y,endOfFile:$,nextToken:F,position:v}};let uu=zs,cu=Dt,hu=Ot,fu=Be,Ui=Ys,pu=lu;const Vi={empty:!0,space:!0};function du(i){for(let e=i.length-1;e>=0;e--){let t=i[e],s=t[3]||t[2];if(s)return s}}let mu=class{constructor(e){this.input=e,this.root=new fu,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new uu;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let s,r,n,o=!1,l=!1,a=[],u=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),s=e[0],s==="("||s==="["?u.push(s==="("?")":"]"):s==="{"&&u.length>0?u.push("}"):s===u[u.length-1]&&u.pop(),u.length===0)if(s===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(s==="{"){l=!0;break}else if(s==="}"){if(a.length>0){for(n=a.length-1,r=a[n];r&&r[0]==="space";)r=a[--n];r&&(t.source.end=this.getPosition(r[3]||r[2]),t.source.end.offset++)}this.end(e);break}else a.push(e);else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(t.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(t,"params",a),o&&(e=a[a.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),l&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let s=0,r;for(let n=t-1;n>=0&&(r=e[n],!(r[0]!=="space"&&(s+=1,s===2)));n--);throw this.input.error("Missed semicolon",r[0]==="word"?r[3]+1:r[2])}colon(e){let t=0,s,r,n;for(let[o,l]of e.entries()){if(r=l,n=r[0],n==="("&&(t+=1),n===")"&&(t-=1),t===0&&n===":")if(!s)this.doubleColon(r);else{if(s[0]==="word"&&s[1]==="progid")continue;return o}s=r}return!1}comment(e){let t=new cu;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let s=e[1].slice(2,-2);if(/^\s*$/.test(s))t.text="",t.raws.left=s,t.raws.right="";else{let r=s.match(/^(\s*)([^]*\S)(\s*)$/);t.text=r[2],t.raws.left=r[1],t.raws.right=r[3]}}createTokenizer(){this.tokenizer=pu(this.input)}decl(e,t){let s=new hu;this.init(s,e[0][2]);let r=e[e.length-1];for(r[0]===";"&&(this.semicolon=!0,e.pop()),s.source.end=this.getPosition(r[3]||r[2]||du(e)),s.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),s.raws.before+=e.shift()[1];for(s.source.start=this.getPosition(e[0][2]),s.prop="";e.length;){let u=e[0][0];if(u===":"||u==="space"||u==="comment")break;s.prop+=e.shift()[1]}s.raws.between="";let n;for(;e.length;)if(n=e.shift(),n[0]===":"){s.raws.between+=n[1];break}else n[0]==="word"&&/\w/.test(n[1])&&this.unknownWord([n]),s.raws.between+=n[1];(s.prop[0]==="_"||s.prop[0]==="*")&&(s.raws.before+=s.prop[0],s.prop=s.prop.slice(1));let o=[],l;for(;e.length&&(l=e[0][0],!(l!=="space"&&l!=="comment"));)o.push(e.shift());this.precheckMissedSemicolon(e);for(let u=e.length-1;u>=0;u--){if(n=e[u],n[1].toLowerCase()==="!important"){s.important=!0;let c=this.stringFrom(e,u);c=this.spacesFromEnd(e)+c,c!==" !important"&&(s.raws.important=c);break}else if(n[1].toLowerCase()==="important"){let c=e.slice(0),f="";for(let h=u;h>0;h--){let d=c[h][0];if(f.trim().startsWith("!")&&d!=="space")break;f=c.pop()[1]+f}f.trim().startsWith("!")&&(s.important=!0,s.raws.important=f,e=c)}if(n[0]!=="space"&&n[0]!=="comment")break}e.some(u=>u[0]!=="space"&&u[0]!=="comment")&&(s.raws.between+=o.map(u=>u[1]).join(""),o=[]),this.raw(s,"value",o.concat(e),t),s.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Ui;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,s=null,r=!1,n=null,o=[],l=e[1].startsWith("--"),a=[],u=e;for(;u;){if(s=u[0],a.push(u),s==="("||s==="[")n||(n=u),o.push(s==="("?")":"]");else if(l&&r&&s==="{")n||(n=u),o.push("}");else if(o.length===0)if(s===";")if(r){this.decl(a,l);return}else break;else if(s==="{"){this.rule(a);return}else if(s==="}"){this.tokenizer.back(a.pop()),t=!0;break}else s===":"&&(r=!0);else s===o[o.length-1]&&(o.pop(),o.length===0&&(n=null));u=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(n),t&&r){if(!l)for(;a.length&&(u=a[a.length-1][0],!(u!=="space"&&u!=="comment"));)this.tokenizer.back(a.pop());this.decl(a,l)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,s,r){let n,o,l=s.length,a="",u=!0,c,f;for(let h=0;h<l;h+=1)n=s[h],o=n[0],o==="space"&&h===l-1&&!r?u=!1:o==="comment"?(f=s[h-1]?s[h-1][0]:"empty",c=s[h+1]?s[h+1][0]:"empty",!Vi[f]&&!Vi[c]?a.slice(-1)===","?u=!1:a+=n[1]:u=!1):a+=n[1];if(!u){let h=s.reduce((d,g)=>d+g[1],"");e.raws[t]={raw:h,value:a}}e[t]=a}rule(e){e.pop();let t=new Ui;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)s=e.pop()[1]+s;return s}spacesAndCommentsFromStart(e){let t,s="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)s+=e.shift()[1];return s}spacesFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],t==="space");)s=e.pop()[1]+s;return s}stringFrom(e,t){let s="";for(let r=t;r<e.length;r++)s+=e[r][1];return e.splice(t,e.length-t),s}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};var gu=mu;let yu=ie,wu=Tt,vu=gu;function yt(i,e){let t=new wu(i,e),s=new vu(t);try{s.parse()}catch(r){throw r}return s.root}var js=yt;yt.default=yt;yu.registerParse(yt);let Cs=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let s=t.node.rangeBy(t);this.line=s.start.line,this.column=s.start.column,this.endLine=s.end.line,this.endColumn=s.end.column}for(let s in t)this[s]=t[s]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var yn=Cs;Cs.default=Cs;let bu=yn,Ss=class{constructor(e,t,s){this.processor=e,this.messages=[],this.root=t,this.opts=s,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let s=new bu(e,t);return this.messages.push(s),s}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}};var Zs=Ss;Ss.default=Ss;let Cu=ie,Su=Gs,Eu=gn,xu=js,Wi=Zs,Au=Be,Ru=Mt,{isClean:Z,my:Nu}=Le;const Mu={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},Iu={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Du={Once:!0,postcssPlugin:!0,prepare:!0},fe=0;function Ee(i){return typeof i=="object"&&typeof i.then=="function"}function wn(i){let e=!1,t=Mu[i.type];return i.type==="decl"?e=i.prop.toLowerCase():i.type==="atrule"&&(e=i.name.toLowerCase()),e&&i.append?[t,t+"-"+e,fe,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:i.append?[t,fe,t+"Exit"]:[t,t+"Exit"]}function zi(i){let e;return i.type==="document"?e=["Document",fe,"DocumentExit"]:i.type==="root"?e=["Root",fe,"RootExit"]:e=wn(i),{eventIndex:0,events:e,iterator:0,node:i,visitorIndex:0,visitors:[]}}function Es(i){return i[Z]=!1,i.nodes&&i.nodes.forEach(e=>Es(e)),i}let xs={},pe=class vn{constructor(e,t,s){this.stringified=!1,this.processed=!1;let r;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))r=Es(t);else if(t instanceof vn||t instanceof Wi)r=Es(t.root),t.map&&(typeof s.map=="undefined"&&(s.map={}),s.map.inline||(s.map.inline=!1),s.map.prev=t.map);else{let n=xu;s.syntax&&(n=s.syntax.parse),s.parser&&(n=s.parser),n.parse&&(n=n.parse);try{r=n(t,s)}catch(o){this.processed=!0,this.error=o}r&&!r[Nu]&&Cu.rebuild(r)}this.result=new Wi(e,r,s),this.helpers=U(D({},xs),{postcss:xs,result:this.result}),this.plugins=this.processor.plugins.map(n=>typeof n=="object"&&n.prepare?D(D({},n),n.prepare(this.result)):n)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let s=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=s.postcssPlugin,e.setMessage()):s.postcssVersion}catch(r){console&&console.error&&console.error(r)}return e}prepareVisitors(){this.listeners={};let e=(t,s,r)=>{this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push([t,r])};for(let t of this.plugins)if(typeof t=="object")for(let s in t){if(!Iu[s]&&/^[A-Z]/.test(s))throw new Error(`Unknown event ${s} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!Du[s])if(typeof t[s]=="object")for(let r in t[s])r==="*"?e(t,s,t[s][r]):e(t,s+"-"+r.toLowerCase(),t[s][r]);else typeof t[s]=="function"&&e(t,s,t[s])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],s=this.runOnRoot(t);if(Ee(s))try{await s}catch(r){throw this.handleError(r)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Z];){e[Z]=!0;let t=[zi(e)];for(;t.length>0;){let s=this.visitTick(t);if(Ee(s))try{await s}catch(r){let n=t[t.length-1].node;throw this.handleError(r,n)}}}if(this.listeners.OnceExit)for(let[t,s]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let r=e.nodes.map(n=>s(n,this.helpers));await Promise.all(r)}else await s(e,this.helpers)}catch(r){throw this.handleError(r)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(s=>e.Once(s,this.helpers));return Ee(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=Ru;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new Eu(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(Ee(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Z];)e[Z]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[s,r]of e){this.result.lastPlugin=s;let n;try{n=r(t,this.helpers)}catch(o){throw this.handleError(o,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(Ee(n))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:s,visitors:r}=t;if(s.type!=="root"&&s.type!=="document"&&!s.parent){e.pop();return}if(r.length>0&&t.visitorIndex<r.length){let[o,l]=r[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return l(s.toProxy(),this.helpers)}catch(a){throw this.handleError(a,s)}}if(t.iterator!==0){let o=t.iterator,l;for(;l=s.nodes[s.indexes[o]];)if(s.indexes[o]+=1,!l[Z]){l[Z]=!0,e.push(zi(l));return}t.iterator=0,delete s.indexes[o]}let n=t.events;for(;t.eventIndex<n.length;){let o=n[t.eventIndex];if(t.eventIndex+=1,o===fe){s.nodes&&s.nodes.length&&(s[Z]=!0,t.iterator=s.getIterator());return}else if(this.listeners[o]){t.visitors=this.listeners[o];return}}e.pop()}walkSync(e){e[Z]=!0;let t=wn(e);for(let s of t)if(s===fe)e.nodes&&e.each(r=>{r[Z]||this.walkSync(r)});else{let r=this.listeners[s];if(r&&this.visitSync(r,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};pe.registerPostcss=i=>{xs=i};var bn=pe;pe.default=pe;Au.registerLazyResult(pe);Su.registerLazyResult(pe);let Ou=gn,Tu=js;const $u=Zs;let Pu=Mt;let As=class{constructor(e,t,s){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=s,this._map=void 0;let r,n=Pu;this.result=new $u(this._processor,r,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get(){return o.root}});let l=new Ou(n,r,this._opts,t);if(l.isMap()){let[a,u]=l.generate();a&&(this.result.css=a),u&&(this.result.map=u)}else l.clearAnnotation(),this.result.css=l.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=Tu;try{e=t(this._css,this._opts)}catch(s){this.error=s}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var _u=As;As.default=As;let ku=Gs,Lu=bn,Bu=_u,Fu=Be,Pe=class{constructor(e=[]){this.version="8.4.49",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let s of e)if(s.postcss===!0?s=s():s.postcss&&(s=s.postcss),typeof s=="object"&&Array.isArray(s.plugins))t=t.concat(s.plugins);else if(typeof s=="object"&&s.postcssPlugin)t.push(s);else if(typeof s=="function")t.push(s);else if(!(typeof s=="object"&&(s.parse||s.stringify)))throw new Error(s+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new Bu(this,e,t):new Lu(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var Uu=Pe;Pe.default=Pe;Fu.registerProcessor(Pe);ku.registerProcessor(Pe);let Cn=zs,Sn=Dt,Vu=ie,Wu=Us,En=Ot,xn=Gs,zu=jl,Gu=Tt,Yu=bn,ju=cn,Zu=It,Xu=js,Xs=Uu,Hu=Zs,An=Be,Rn=Ys,Ju=Mt,Ku=yn;function I(...i){return i.length===1&&Array.isArray(i[0])&&(i=i[0]),new Xs(i)}I.plugin=function(e,t){let s=!1;function r(...o){console&&console.warn&&!s&&(s=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let l=t(...o);return l.postcssPlugin=e,l.postcssVersion=new Xs().version,l}let n;return Object.defineProperty(r,"postcss",{get(){return n||(n=r()),n}}),r.process=function(o,l,a){return I([r(a)]).process(o,l)},r};I.stringify=Ju;I.parse=Xu;I.fromJSON=zu;I.list=ju;I.comment=i=>new Sn(i);I.atRule=i=>new Cn(i);I.decl=i=>new En(i);I.rule=i=>new Rn(i);I.root=i=>new An(i);I.document=i=>new xn(i);I.CssSyntaxError=Wu;I.Declaration=En;I.Container=Vu;I.Processor=Xs;I.Document=xn;I.Comment=Sn;I.Warning=Ku;I.AtRule=Cn;I.Result=Hu;I.Input=Gu;I.Rule=Rn;I.Root=An;I.Node=Zu;Yu.registerPostcss(I);var Qu=I;I.default=I;const T=cl(Qu);T.stringify;T.fromJSON;T.plugin;T.parse;T.list;T.document;T.comment;T.atRule;T.rule;T.decl;T.root;T.CssSyntaxError;T.Declaration;T.Container;T.Processor;T.Document;T.Comment;T.Warning;T.AtRule;T.Result;T.Input;T.Rule;T.Root;T.Node;var A=(i=>(i[i.Document=0]="Document",i[i.DocumentType=1]="DocumentType",i[i.Element=2]="Element",i[i.Text=3]="Text",i[i.CDATA=4]="CDATA",i[i.Comment=5]="Comment",i))(A||{});function qu(i){const e={},t=/;(?![^(]*\))/g,s=/:(.+)/,r=/\/\*.*?\*\//g;return i.replace(r,"").split(t).forEach(function(n){if(n){const o=n.split(s);o.length>1&&(e[Rs(o[0].trim())]=o[1].trim())}}),e}function Gi(i){const e=[];for(const t in i){const s=i[t];if(typeof s!="string")continue;const r=ic(t);e.push(`${r}: ${s};`)}return e.join(" ")}const ec=/-([a-z])/g,tc=/^--[a-zA-Z0-9-]+$/,Rs=i=>tc.test(i)?i:i.replace(ec,(e,t)=>t?t.toUpperCase():""),sc=/\B([A-Z])/g,ic=i=>i.replace(sc,"-$1").toLowerCase();class G{constructor(...e){y(this,"parentElement",null),y(this,"parentNode",null),y(this,"ownerDocument"),y(this,"firstChild",null),y(this,"lastChild",null),y(this,"previousSibling",null),y(this,"nextSibling",null),y(this,"ELEMENT_NODE",1),y(this,"TEXT_NODE",3),y(this,"nodeType"),y(this,"nodeName"),y(this,"RRNodeType")}get childNodes(){const e=[];let t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(e instanceof G){if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0}else return!1;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}class Hs extends G{constructor(...e){super(e),y(this,"nodeType",9),y(this,"nodeName","#document"),y(this,"compatMode","CSS1Compat"),y(this,"RRNodeType",A.Document),y(this,"textContent",null),this.ownerDocument=this}get documentElement(){return this.childNodes.find(e=>e.RRNodeType===A.Element&&e.tagName==="HTML")||null}get body(){var e;return((e=this.documentElement)==null?void 0:e.childNodes.find(t=>t.RRNodeType===A.Element&&t.tagName==="BODY"))||null}get head(){var e;return((e=this.documentElement)==null?void 0:e.childNodes.find(t=>t.RRNodeType===A.Element&&t.tagName==="HEAD"))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(e){const t=e.RRNodeType;if((t===A.Element||t===A.DocumentType)&&this.childNodes.some(r=>r.RRNodeType===t))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${t===A.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const s=Js(this,e);return s.parentElement=null,s}insertBefore(e,t){const s=e.RRNodeType;if((s===A.Element||s===A.DocumentType)&&this.childNodes.some(n=>n.RRNodeType===s))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${s===A.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const r=On(this,e,t);return r.parentElement=null,r}removeChild(e){return Tn(this,e)}open(){this.firstChild=null,this.lastChild=null}close(){}write(e){let t;if(e==='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'?t="-//W3C//DTD XHTML 1.0 Transitional//EN":e==='<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'&&(t="-//W3C//DTD HTML 4.0 Transitional//EN"),t){const s=this.createDocumentType("html",t,"");this.open(),this.appendChild(s)}}createDocument(e,t,s){return new Hs}createDocumentType(e,t,s){const r=new Nn(e,t,s);return r.ownerDocument=this,r}createElement(e){const t=new $t(e);return t.ownerDocument=this,t}createElementNS(e,t){return this.createElement(t)}createTextNode(e){const t=new Mn(e);return t.ownerDocument=this,t}createComment(e){const t=new In(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new Dn(e);return t.ownerDocument=this,t}toString(){return"RRDocument"}}class Nn extends G{constructor(e,t,s){super(),y(this,"nodeType",10),y(this,"RRNodeType",A.DocumentType),y(this,"name"),y(this,"publicId"),y(this,"systemId"),y(this,"textContent",null),this.name=e,this.publicId=t,this.systemId=s,this.nodeName=e}toString(){return"RRDocumentType"}}class $t extends G{constructor(e){super(),y(this,"nodeType",1),y(this,"RRNodeType",A.Element),y(this,"tagName"),y(this,"attributes",{}),y(this,"shadowRoot",null),y(this,"scrollLeft"),y(this,"scrollTop"),this.tagName=e.toUpperCase(),this.nodeName=e.toUpperCase()}get textContent(){let e="";return this.childNodes.forEach(t=>e+=t.textContent),e}set textContent(e){this.firstChild=null,this.lastChild=null,this.appendChild(this.ownerDocument.createTextNode(e))}get classList(){return new oc(this.attributes.class,e=>{this.attributes.class=e})}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const e=this.attributes.style?qu(this.attributes.style):{},t=/\B([A-Z])/g;return e.setProperty=(s,r,n)=>{if(t.test(s))return;const o=Rs(s);r?e[o]=r:delete e[o],n==="important"&&(e[o]+=" !important"),this.attributes.style=Gi(e)},e.removeProperty=s=>{if(t.test(s))return"";const r=Rs(s),n=e[r]||"";return delete e[r],this.attributes.style=Gi(e),n},e}getAttribute(e){return this.attributes[e]===void 0?null:this.attributes[e]}setAttribute(e,t){this.attributes[e]=t}setAttributeNS(e,t,s){this.setAttribute(t,s)}removeAttribute(e){delete this.attributes[e]}appendChild(e){return Js(this,e)}insertBefore(e,t){return On(this,e,t)}removeChild(e){return Tn(this,e)}attachShadow(e){const t=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=t,t}dispatchEvent(e){return!0}toString(){let e="";for(const t in this.attributes)e+=`${t}="${this.attributes[t]}" `;return`${this.tagName} ${e}`}}class rc extends $t{constructor(){super(...arguments),y(this,"currentTime"),y(this,"volume"),y(this,"paused"),y(this,"muted"),y(this,"playbackRate"),y(this,"loop")}attachShadow(e){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}class nc extends $t{constructor(){super(...arguments),y(this,"tagName","DIALOG"),y(this,"nodeName","DIALOG")}get isModal(){return this.getAttribute("rr_open_mode")==="modal"}get open(){return this.getAttribute("open")!==null}close(){this.removeAttribute("open"),this.removeAttribute("rr_open_mode")}show(){this.setAttribute("open",""),this.setAttribute("rr_open_mode","non-modal")}showModal(){this.setAttribute("open",""),this.setAttribute("rr_open_mode","modal")}}class Mn extends G{constructor(e){super(),y(this,"nodeType",3),y(this,"nodeName","#text"),y(this,"RRNodeType",A.Text),y(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRText text=${JSON.stringify(this.data)}`}}class In extends G{constructor(e){super(),y(this,"nodeType",8),y(this,"nodeName","#comment"),y(this,"RRNodeType",A.Comment),y(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}class Dn extends G{constructor(e){super(),y(this,"nodeName","#cdata-section"),y(this,"nodeType",4),y(this,"RRNodeType",A.CDATA),y(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}class oc{constructor(e,t){if(y(this,"onChange"),y(this,"classes",[]),y(this,"add",(...s)=>{for(const r of s){const n=String(r);this.classes.indexOf(n)>=0||this.classes.push(n)}this.onChange&&this.onChange(this.classes.join(" "))}),y(this,"remove",(...s)=>{this.classes=this.classes.filter(r=>s.indexOf(r)===-1),this.onChange&&this.onChange(this.classes.join(" "))}),e){const s=e.trim().split(/\s+/);this.classes.push(...s)}this.onChange=t}}function Js(i,e){return e.parentNode&&e.parentNode.removeChild(e),i.lastChild?(i.lastChild.nextSibling=e,e.previousSibling=i.lastChild):(i.firstChild=e,e.previousSibling=null),i.lastChild=e,e.nextSibling=null,e.parentNode=i,e.parentElement=i,e.ownerDocument=i.ownerDocument,e}function On(i,e,t){if(!t)return Js(i,e);if(t.parentNode!==i)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return e===t||(e.parentNode&&e.parentNode.removeChild(e),e.previousSibling=t.previousSibling,t.previousSibling=e,e.nextSibling=t,e.previousSibling?e.previousSibling.nextSibling=e:i.firstChild=e,e.parentElement=i,e.parentNode=i,e.ownerDocument=i.ownerDocument),e}function Tn(i,e){if(e.parentNode!==i)throw new Error("Failed to execute 'removeChild' on 'RRNode': The RRNode to be removed is not a child of this RRNode.");return e.previousSibling?e.previousSibling.nextSibling=e.nextSibling:i.firstChild=e.nextSibling,e.nextSibling?e.nextSibling.previousSibling=e.previousSibling:i.lastChild=e.previousSibling,e.previousSibling=null,e.nextSibling=null,e.parentElement=null,e.parentNode=null,e}var V=(i=>(i[i.PLACEHOLDER=0]="PLACEHOLDER",i[i.ELEMENT_NODE=1]="ELEMENT_NODE",i[i.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",i[i.TEXT_NODE=3]="TEXT_NODE",i[i.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",i[i.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",i[i.ENTITY_NODE=6]="ENTITY_NODE",i[i.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",i[i.COMMENT_NODE=8]="COMMENT_NODE",i[i.DOCUMENT_NODE=9]="DOCUMENT_NODE",i[i.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",i[i.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",i))(V||{});const Ns={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},ac={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};let X=null;function wt(i,e,t,s=e.mirror||e.ownerDocument.mirror){i=lc(i,e,t,s),$n(i,e,t,s),uc(i,e,t)}function lc(i,e,t,s){var r;if(t.afterAppend&&!X&&(X=new WeakSet,setTimeout(()=>{X=null},0)),!Ks(i,e)){const n=vt(e,t.mirror,s);(r=i.parentNode)==null||r.replaceChild(n,i),i=n}switch(e.RRNodeType){case A.Document:{if(!re(i,e,t.mirror,s)){const n=s.getMeta(e);n&&(t.mirror.removeNodeFromMap(i),i.close(),i.open(),t.mirror.add(i,n),X==null||X.add(i))}break}case A.Element:{const n=i,o=e;switch(o.tagName){case"IFRAME":{const l=i.contentDocument;if(!l)break;wt(l,e.contentDocument,t,s);break}}o.shadowRoot&&(n.shadowRoot||n.attachShadow({mode:"open"}),$n(n.shadowRoot,o.shadowRoot,t,s)),cc(n,o,s);break}}return i}function uc(i,e,t){var s;switch(e.RRNodeType){case A.Document:{const r=e.scrollData;r&&t.applyScroll(r,!0);break}case A.Element:{const r=i,n=e;switch(n.scrollData&&t.applyScroll(n.scrollData,!0),n.inputData&&t.applyInput(n.inputData),n.tagName){case"AUDIO":case"VIDEO":{const o=i,l=n;l.paused!==void 0&&(l.paused?o.pause():o.play()),l.muted!==void 0&&(o.muted=l.muted),l.volume!==void 0&&(o.volume=l.volume),l.currentTime!==void 0&&(o.currentTime=l.currentTime),l.playbackRate!==void 0&&(o.playbackRate=l.playbackRate),l.loop!==void 0&&(o.loop=l.loop);break}case"CANVAS":{const o=e;if(o.rr_dataURL!==null){const l=document.createElement("img");l.onload=()=>{const a=r.getContext("2d");a&&a.drawImage(l,0,0,l.width,l.height)},l.src=o.rr_dataURL}o.canvasMutations.forEach(l=>t.applyCanvas(l.event,l.mutation,i));break}case"STYLE":{const o=r.sheet;o&&e.rules.forEach(l=>t.applyStyleSheetMutation(l,o));break}case"DIALOG":{const o=r,l=n,a=o.open,u=o.matches("dialog:modal"),c=l.open,f=l.isModal,h=u!==f,d=a!==c;if((h||a&&d)&&o.close(),c&&(d||h))try{f?o.showModal():o.show()}catch(g){console.warn(g)}break}}break}case A.Text:case A.Comment:case A.CDATA:{i.textContent!==e.data&&(i.textContent=e.data);break}}X!=null&&X.has(i)&&(X.delete(i),(s=t.afterAppend)==null||s.call(t,i,t.mirror.getId(i)))}function cc(i,e,t){const s=i.attributes,r=e.attributes;for(const n in r){const o=r[n],l=t.getMeta(e);if(l!=null&&l.isSVG&&Ns[n])i.setAttributeNS(Ns[n],n,o);else if(e.tagName==="CANVAS"&&n==="rr_dataURL"){const a=document.createElement("img");a.src=o,a.onload=()=>{const u=i.getContext("2d");u&&u.drawImage(a,0,0,a.width,a.height)}}else{if(e.tagName==="IFRAME"&&n==="srcdoc")continue;try{i.setAttribute(n,o)}catch(a){console.warn(a)}}}for(const{name:n}of Array.from(s))n in r||i.removeAttribute(n);e.scrollLeft&&(i.scrollLeft=e.scrollLeft),e.scrollTop&&(i.scrollTop=e.scrollTop)}function $n(i,e,t,s){const r=Array.from(i.childNodes),n=e.childNodes;if(r.length===0&&n.length===0)return;let o=0,l=r.length-1,a=0,u=n.length-1,c=r[o],f=r[l],h=n[a],d=n[u],g,b;for(;o<=l&&a<=u;)if(c===void 0)c=r[++o];else if(f===void 0)f=r[--l];else if(re(c,h,t.mirror,s))c=r[++o],h=n[++a];else if(re(f,d,t.mirror,s))f=r[--l],d=n[--u];else if(re(c,d,t.mirror,s)){try{i.insertBefore(c,f.nextSibling)}catch(w){console.warn(w)}c=r[++o],d=n[--u]}else if(re(f,h,t.mirror,s)){try{i.insertBefore(f,c)}catch(w){console.warn(w)}f=r[--l],h=n[++a]}else{if(!g){g={};for(let v=o;v<=l;v++){const S=r[v];S&&t.mirror.hasNode(S)&&(g[t.mirror.getId(S)]=v)}}b=g[s.getId(h)];const w=r[b];if(b!==void 0&&w&&re(w,h,t.mirror,s)){try{i.insertBefore(w,c)}catch(v){console.warn(v)}r[b]=void 0}else{const v=vt(h,t.mirror,s);i.nodeName==="#document"&&c&&(v.nodeType===v.DOCUMENT_TYPE_NODE&&c.nodeType===c.DOCUMENT_TYPE_NODE||v.nodeType===v.ELEMENT_NODE&&c.nodeType===c.ELEMENT_NODE)&&(i.removeChild(c),t.mirror.removeNodeFromMap(c),c=r[++o]);try{i.insertBefore(v,c||null)}catch(S){console.warn(S)}}h=n[++a]}if(o>l){const w=n[u+1];let v=null;for(w&&(v=t.mirror.getNode(s.getId(w)));a<=u;++a){const S=vt(n[a],t.mirror,s);try{i.insertBefore(S,v)}catch($){console.warn($)}}}else if(a>u)for(;o<=l;o++){const w=r[o];if(!(!w||w.parentNode!==i))try{i.removeChild(w),t.mirror.removeNodeFromMap(w)}catch(v){console.warn(v)}}let p=i.firstChild,m=e.firstChild;for(;p!==null&&m!==null;)wt(p,m,t,s),p=p.nextSibling,m=m.nextSibling}function vt(i,e,t){const s=t.getId(i),r=t.getMeta(i);let n=null;if(s>-1&&(n=e.getNode(s)),n!==null&&Ks(n,i))return n;switch(i.RRNodeType){case A.Document:n=new Document;break;case A.DocumentType:n=document.implementation.createDocumentType(i.name,i.publicId,i.systemId);break;case A.Element:{let o=i.tagName.toLowerCase();o=ac[o]||o,r&&"isSVG"in r&&(r!=null&&r.isSVG)?n=document.createElementNS(Ns.svg,o):n=document.createElement(i.tagName);break}case A.Text:n=document.createTextNode(i.data);break;case A.Comment:n=document.createComment(i.data);break;case A.CDATA:n=document.createCDATASection(i.data);break}r&&e.add(n,D({},r));try{X==null||X.add(n)}catch(o){}return n}function Ks(i,e){return i.nodeType!==e.nodeType?!1:i.nodeType!==i.ELEMENT_NODE||i.tagName.toUpperCase()===e.tagName}function re(i,e,t,s){const r=t.getId(i),n=s.getId(e);return r===-1||r!==n?!1:Ks(i,e)}class de extends Hs{constructor(e){super(),y(this,"UNSERIALIZED_STARTING_ID",-2),y(this,"_unserializedId",this.UNSERIALIZED_STARTING_ID),y(this,"mirror",Sc()),y(this,"scrollData",null),e&&(this.mirror=e)}get unserializedId(){return this._unserializedId--}createDocument(e,t,s){return new de}createDocumentType(e,t,s){const r=new hc(e,t,s);return r.ownerDocument=this,r}createElement(e){const t=e.toUpperCase();let s;switch(t){case"AUDIO":case"VIDEO":s=new fc(t);break;case"IFRAME":s=new gc(t,this.mirror);break;case"CANVAS":s=new dc(t);break;case"STYLE":s=new mc(t);break;case"DIALOG":s=new pc(t);break;default:s=new Pt(t);break}return s.ownerDocument=this,s}createComment(e){const t=new wc(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new vc(e);return t.ownerDocument=this,t}createTextNode(e){const t=new yc(e);return t.ownerDocument=this,t}destroyTree(){this.firstChild=null,this.lastChild=null,this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}}const hc=Nn;class Pt extends $t{constructor(){super(...arguments),y(this,"inputData",null),y(this,"scrollData",null)}}class fc extends rc{}class pc extends nc{}class dc extends Pt{constructor(){super(...arguments),y(this,"rr_dataURL",null),y(this,"canvasMutations",[])}getContext(){return null}}class mc extends Pt{constructor(){super(...arguments),y(this,"rules",[])}}class gc extends Pt{constructor(e,t){super(e),y(this,"contentDocument",new de),this.contentDocument.mirror=t}}const yc=Mn,wc=In,vc=Dn;function bc(i){return i instanceof HTMLFormElement?"FORM":i.tagName.toUpperCase()}function Pn(i,e,t,s){let r;switch(i.nodeType){case V.DOCUMENT_NODE:s&&s.nodeName==="IFRAME"?r=s.contentDocument:(r=e,r.compatMode=i.compatMode);break;case V.DOCUMENT_TYPE_NODE:{const o=i;r=e.createDocumentType(o.name,o.publicId,o.systemId);break}case V.ELEMENT_NODE:{const o=i,l=bc(o);r=e.createElement(l);const a=r;for(const{name:u,value:c}of Array.from(o.attributes))a.attributes[u]=c;o.scrollLeft&&(a.scrollLeft=o.scrollLeft),o.scrollTop&&(a.scrollTop=o.scrollTop);break}case V.TEXT_NODE:r=e.createTextNode(i.textContent||"");break;case V.CDATA_SECTION_NODE:r=e.createCDATASection(i.data);break;case V.COMMENT_NODE:r=e.createComment(i.textContent||"");break;case V.DOCUMENT_FRAGMENT_NODE:r=s.attachShadow({mode:"open"});break;default:return null}let n=t.getMeta(i);return e instanceof de&&(n||(n=_n(r,e.unserializedId),t.add(i,n)),e.mirror.add(r,D({},n))),r}function Cc(i,e=ul(),t=new de){function s(r,n){const o=Pn(r,t,e,n);if(o!==null)if((n==null?void 0:n.nodeName)!=="IFRAME"&&r.nodeType!==V.DOCUMENT_FRAGMENT_NODE&&(n==null||n.appendChild(o),o.parentNode=n,o.parentElement=n),r.nodeName==="IFRAME"){const l=r.contentDocument;l&&s(l,o)}else(r.nodeType===V.DOCUMENT_NODE||r.nodeType===V.ELEMENT_NODE||r.nodeType===V.DOCUMENT_FRAGMENT_NODE)&&(r.nodeType===V.ELEMENT_NODE&&r.shadowRoot&&s(r.shadowRoot,o),r.childNodes.forEach(l=>s(l,o)))}return s(i,null),t}function Sc(){return new Ec}class Ec{constructor(){y(this,"idNodeMap",new Map),y(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;const s=(t=this.getMeta(e))==null?void 0:t.id;return s!=null?s:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(s=>this.removeNodeFromMap(s))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const s=t.id;this.idNodeMap.set(s,e),this.nodeMetaMap.set(e,t)}replace(e,t){const s=this.getNode(e);if(s){const r=this.nodeMetaMap.get(s);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function _n(i,e){switch(i.RRNodeType){case A.Document:return{id:e,type:i.RRNodeType,childNodes:[]};case A.DocumentType:{const t=i;return{id:e,type:i.RRNodeType,name:t.name,publicId:t.publicId,systemId:t.systemId}}case A.Element:return{id:e,type:i.RRNodeType,tagName:i.tagName.toLowerCase(),attributes:{},childNodes:[]};case A.Text:return{id:e,type:i.RRNodeType,textContent:i.textContent||""};case A.Comment:return{id:e,type:i.RRNodeType,textContent:i.textContent||""};case A.CDATA:return{id:e,type:i.RRNodeType,textContent:""}}}const Yi={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},ji={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},st={},xc=()=>!!globalThis.Zone;function Qs(i){if(st[i])return st[i];const e=globalThis[i],t=e.prototype,s=i in Yi?Yi[i]:void 0,r=!!(s&&s.every(l=>{var a,u;return!!((u=(a=Object.getOwnPropertyDescriptor(t,l))==null?void 0:a.get)!=null&&u.toString().includes("[native code]"))})),n=i in ji?ji[i]:void 0,o=!!(n&&n.every(l=>{var a;return typeof t[l]=="function"&&((a=t[l])==null?void 0:a.toString().includes("[native code]"))}));if(r&&o&&!xc())return st[i]=e.prototype,e.prototype;try{const l=document.createElement("iframe");document.body.appendChild(l);const a=l.contentWindow;if(!a)return e.prototype;const u=a[i].prototype;return document.body.removeChild(l),u?st[i]=u:t}catch(l){return t}}const Yt={};function ee(i,e,t){var s;const r=`${i}.${String(t)}`;if(Yt[r])return Yt[r].call(e);const n=Qs(i),o=(s=Object.getOwnPropertyDescriptor(n,t))==null?void 0:s.get;return o?(Yt[r]=o,o.call(e)):e[t]}const jt={};function kn(i,e,t){const s=`${i}.${String(t)}`;if(jt[s])return jt[s].bind(e);const n=Qs(i)[t];return typeof n!="function"?e[t]:(jt[s]=n,n.bind(e))}function Ac(i){return ee("Node",i,"childNodes")}function Rc(i){return ee("Node",i,"parentNode")}function Nc(i){return ee("Node",i,"parentElement")}function Mc(i){return ee("Node",i,"textContent")}function Ic(i,e){return kn("Node",i,"contains")(e)}function Dc(i){return kn("Node",i,"getRootNode")()}function Oc(i){return!i||!("host"in i)?null:ee("ShadowRoot",i,"host")}function Tc(i){return i.styleSheets}function $c(i){return!i||!("shadowRoot"in i)?null:ee("Element",i,"shadowRoot")}function Pc(i,e){return ee("Element",i,"querySelector")(e)}function _c(i,e){return ee("Element",i,"querySelectorAll")(e)}function kc(){return Qs("MutationObserver").constructor}const Lc={childNodes:Ac,parentNode:Rc,parentElement:Nc,textContent:Mc,contains:Ic,getRootNode:Dc,host:Oc,styleSheets:Tc,shadowRoot:$c,querySelector:Pc,querySelectorAll:_c,mutationObserver:kc},ne=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Zi={map:{},getId(){return console.error(ne),-1},getNode(){return console.error(ne),null},removeNodeFromMap(){console.error(ne)},has(){return console.error(ne),!1},reset(){console.error(ne)}};typeof window!="undefined"&&window.Proxy&&window.Reflect&&(Zi=new Proxy(Zi,{get(i,e,t){return e==="map"&&console.error(ne),Reflect.get(i,e,t)}}));Date.now().toString();function Bc(i=window){"NodeList"in i&&!i.NodeList.prototype.forEach&&(i.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in i&&!i.DOMTokenList.prototype.forEach&&(i.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function Fc(i){const e={},t=(r,n)=>{const o={value:r,parent:n,children:[]};return e[r.node.id]=o,o},s=[];for(const r of i){const{nextId:n,parentId:o}=r;if(n&&n in e){const l=e[n];if(l.parent){const a=l.parent.children.indexOf(l);l.parent.children.splice(a,0,t(r,l.parent))}else{const a=s.indexOf(l);s.splice(a,0,t(r,null))}continue}if(o in e){const l=e[o];l.children.push(t(r,l));continue}s.push(t(r,null))}return s}function Ln(i,e){e(i.value);for(let t=i.children.length-1;t>=0;t--)Ln(i.children[t],e)}function Zt(i,e){return!!(i.nodeName==="IFRAME"&&e.getMeta(i))}function Bn(i,e){var t,s;const r=(s=(t=i.ownerDocument)==null?void 0:t.defaultView)==null?void 0:s.frameElement;if(!r||r===e)return{x:0,y:0,relativeScale:1,absoluteScale:1};const n=r.getBoundingClientRect(),o=Bn(r,e),l=n.height/r.clientHeight;return{x:n.x*o.relativeScale+o.x,y:n.y*o.relativeScale+o.y,relativeScale:l,absoluteScale:o.absoluteScale*l}}function it(i){return i?i instanceof G&&"shadowRoot"in i?!!i.shadowRoot:!!Lc.shadowRoot(i):!1}function xe(i,e){const t=i[e[0]];return e.length===1?t:xe(t.cssRules[e[1]].cssRules,e.slice(2))}function Xi(i){const e=[...i],t=e.pop();return{positions:e,index:t}}function Uc(i){const e=new Set,t=[];for(let s=i.length;s--;){const r=i[s];e.has(r.id)||(t.push(r),e.add(r.id))}return t}class Vc{constructor(){C(this,"id",1),C(this,"styleIDMap",new WeakMap),C(this,"idStyleMap",new Map)}getId(e){var t;return(t=this.styleIDMap.get(e))!=null?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let s;return t===void 0?s=this.id++:s=t,this.styleIDMap.set(e,s),this.idStyleMap.set(s,e),s}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}var P=(i=>(i[i.DomContentLoaded=0]="DomContentLoaded",i[i.Load=1]="Load",i[i.FullSnapshot=2]="FullSnapshot",i[i.IncrementalSnapshot=3]="IncrementalSnapshot",i[i.Meta=4]="Meta",i[i.Custom=5]="Custom",i[i.Plugin=6]="Plugin",i))(P||{}),N=(i=>(i[i.Mutation=0]="Mutation",i[i.MouseMove=1]="MouseMove",i[i.MouseInteraction=2]="MouseInteraction",i[i.Scroll=3]="Scroll",i[i.ViewportResize=4]="ViewportResize",i[i.Input=5]="Input",i[i.TouchMove=6]="TouchMove",i[i.MediaInteraction=7]="MediaInteraction",i[i.StyleSheetRule=8]="StyleSheetRule",i[i.CanvasMutation=9]="CanvasMutation",i[i.Font=10]="Font",i[i.Log=11]="Log",i[i.Drag=12]="Drag",i[i.StyleDeclaration=13]="StyleDeclaration",i[i.Selection=14]="Selection",i[i.AdoptedStyleSheet=15]="AdoptedStyleSheet",i[i.CustomElement=16]="CustomElement",i))(N||{}),k=(i=>(i[i.MouseUp=0]="MouseUp",i[i.MouseDown=1]="MouseDown",i[i.Click=2]="Click",i[i.ContextMenu=3]="ContextMenu",i[i.DblClick=4]="DblClick",i[i.Focus=5]="Focus",i[i.Blur=6]="Blur",i[i.TouchStart=7]="TouchStart",i[i.TouchMove_Departed=8]="TouchMove_Departed",i[i.TouchEnd=9]="TouchEnd",i[i.TouchCancel=10]="TouchCancel",i))(k||{}),bt=(i=>(i[i["2D"]=0]="2D",i[i.WebGL=1]="WebGL",i[i.WebGL2=2]="WebGL2",i))(bt||{}),Ms=(i=>(i[i.Play=0]="Play",i[i.Pause=1]="Pause",i[i.Seeked=2]="Seeked",i[i.VolumeChange=3]="VolumeChange",i[i.RateChange=4]="RateChange",i))(Ms||{}),R=(i=>(i.Start="start",i.Pause="pause",i.Resume="resume",i.Resize="resize",i.Finish="finish",i.FullsnapshotRebuilded="fullsnapshot-rebuilded",i.LoadStylesheetStart="load-stylesheet-start",i.LoadStylesheetEnd="load-stylesheet-end",i.SkipStart="skip-start",i.SkipEnd="skip-end",i.MouseInteraction="mouse-interaction",i.EventCast="event-cast",i.CustomEvent="custom-event",i.Flush="flush",i.StateChange="state-change",i.PlayBack="play-back",i.Destroy="destroy",i))(R||{}),Q=(i=>(i[i.Document=0]="Document",i[i.DocumentType=1]="DocumentType",i[i.Element=2]="Element",i[i.Text=3]="Text",i[i.CDATA=4]="CDATA",i[i.Comment=5]="Comment",i))(Q||{}),Hi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ae=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(var rt=0;rt<Hi.length;rt++)Ae[Hi.charCodeAt(rt)]=rt;var Wc=function(i){var e=i.length*.75,t=i.length,s,r=0,n,o,l,a;i[i.length-1]==="="&&(e--,i[i.length-2]==="="&&e--);var u=new ArrayBuffer(e),c=new Uint8Array(u);for(s=0;s<t;s+=4)n=Ae[i.charCodeAt(s)],o=Ae[i.charCodeAt(s+1)],l=Ae[i.charCodeAt(s+2)],a=Ae[i.charCodeAt(s+3)],c[r++]=n<<2|o>>4,c[r++]=(o&15)<<4|l>>2,c[r++]=(l&3)<<6|a&63;return u};const zc="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",Gc=i=>Uint8Array.from(atob(i),e=>e.charCodeAt(0));typeof self!="undefined"&&self.Blob&&new Blob([Gc(zc)],{type:"text/javascript;charset=utf-8"});try{if(Array.from([1],i=>i*2)[0]!==2){const i=document.createElement("iframe");document.body.appendChild(i),Array.from=((oi=i.contentWindow)==null?void 0:oi.Array.from)||Array.from,document.body.removeChild(i)}}catch(i){console.debug("Unable to override Array.from",i)}ar();function Fn(i){return{all:i=i||new Map,on:function(e,t){var s=i.get(e);s?s.push(t):i.set(e,[t])},off:function(e,t){var s=i.get(e);s&&(t?s.splice(s.indexOf(t)>>>0,1):i.set(e,[]))},emit:function(e,t){var s=i.get(e);s&&s.slice().map(function(r){r(t)}),(s=i.get("*"))&&s.slice().map(function(r){r(e,t)})}}}const Yc=Object.freeze(Object.defineProperty({__proto__:null,default:Fn},Symbol.toStringTag,{value:"Module"}));function jc(i=window,e=document){if("scrollBehavior"in e.documentElement.style&&i.__forceSmoothScrollPolyfill__!==!0)return;const t=i.HTMLElement||i.Element,s=468,r={scroll:i.scroll||i.scrollTo,scrollBy:i.scrollBy,elementScroll:t.prototype.scroll||a,scrollIntoView:t.prototype.scrollIntoView},n=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now;function o(m){const w=["MSIE ","Trident/","Edge/"];return new RegExp(w.join("|")).test(m)}const l=o(i.navigator.userAgent)?1:0;function a(m,w){this.scrollLeft=m,this.scrollTop=w}function u(m){return .5*(1-Math.cos(Math.PI*m))}function c(m){if(m===null||typeof m!="object"||m.behavior===void 0||m.behavior==="auto"||m.behavior==="instant")return!0;if(typeof m=="object"&&m.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+m.behavior+" is not a valid value for enumeration ScrollBehavior.")}function f(m,w){if(w==="Y")return m.clientHeight+l<m.scrollHeight;if(w==="X")return m.clientWidth+l<m.scrollWidth}function h(m,w){const v=i.getComputedStyle(m,null)["overflow"+w];return v==="auto"||v==="scroll"}function d(m){const w=f(m,"Y")&&h(m,"Y"),v=f(m,"X")&&h(m,"X");return w||v}function g(m){for(;m!==e.body&&d(m)===!1;)m=m.parentNode||m.host;return m}function b(m){const w=n();let v,S,$,F=(w-m.startTime)/s;F=F>1?1:F,v=u(F),S=m.startX+(m.x-m.startX)*v,$=m.startY+(m.y-m.startY)*v,m.method.call(m.scrollable,S,$),(S!==m.x||$!==m.y)&&i.requestAnimationFrame(b.bind(i,m))}function p(m,w,v){let S,$,F,Y;const L=n();m===e.body?(S=i,$=i.scrollX||i.pageXOffset,F=i.scrollY||i.pageYOffset,Y=r.scroll):(S=m,$=m.scrollLeft,F=m.scrollTop,Y=a),b({scrollable:S,method:Y,startTime:L,startX:$,startY:F,x:w,y:v})}i.scroll=i.scrollTo=function(){if(arguments[0]!==void 0){if(c(arguments[0])===!0){r.scroll.call(i,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:i.scrollX||i.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:i.scrollY||i.pageYOffset);return}p.call(i,e.body,arguments[0].left!==void 0?~~arguments[0].left:i.scrollX||i.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:i.scrollY||i.pageYOffset)}},i.scrollBy=function(){if(arguments[0]!==void 0){if(c(arguments[0])){r.scrollBy.call(i,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}p.call(i,e.body,~~arguments[0].left+(i.scrollX||i.pageXOffset),~~arguments[0].top+(i.scrollY||i.pageYOffset))}},t.prototype.scroll=t.prototype.scrollTo=function(){if(arguments[0]===void 0)return;if(c(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");r.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}const m=arguments[0].left,w=arguments[0].top;p.call(this,this,typeof m=="undefined"?this.scrollLeft:~~m,typeof w=="undefined"?this.scrollTop:~~w)},t.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(c(arguments[0])===!0){r.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},t.prototype.scrollIntoView=function(){if(c(arguments[0])===!0){r.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}const m=g(this),w=m.getBoundingClientRect(),v=this.getBoundingClientRect();m!==e.body?(p.call(this,m,m.scrollLeft+v.left-w.left,m.scrollTop+v.top-w.top),i.getComputedStyle(m).position!=="fixed"&&i.scrollBy({left:w.left,top:w.top,behavior:"smooth"})):i.scrollBy({left:v.left,top:v.top,behavior:"smooth"})}}class Zc{constructor(e=[],t){C(this,"timeOffset",0),C(this,"speed"),C(this,"actions"),C(this,"raf",null),C(this,"lastTimestamp"),this.actions=e,this.speed=t.speed}addAction(e){const t=this.raf===!0;if(!this.actions.length||this.actions[this.actions.length-1].delay<=e.delay)this.actions.push(e);else{const s=this.findActionIndex(e);this.actions.splice(s,0,e)}t&&(this.raf=requestAnimationFrame(this.rafCheck.bind(this)))}start(){this.timeOffset=0,this.lastTimestamp=performance.now(),this.raf=requestAnimationFrame(this.rafCheck.bind(this))}rafCheck(){const e=performance.now();for(this.timeOffset+=(e-this.lastTimestamp)*this.speed,this.lastTimestamp=e;this.actions.length;){const t=this.actions[0];if(this.timeOffset>=t.delay)this.actions.shift(),t.doAction();else break}this.actions.length>0?this.raf=requestAnimationFrame(this.rafCheck.bind(this)):this.raf=!0}clear(){this.raf&&(this.raf!==!0&&cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(e){this.speed=e}isActive(){return this.raf!==null}findActionIndex(e){let t=0,s=this.actions.length-1;for(;t<=s;){const r=Math.floor((t+s)/2);if(this.actions[r].delay<e.delay)t=r+1;else if(this.actions[r].delay>e.delay)s=r-1;else return r+1}return t}}function Ji(i,e){if(i.type===P.IncrementalSnapshot&&i.data.source===N.MouseMove&&i.data.positions&&i.data.positions.length){const t=i.data.positions[0].timeOffset,s=i.timestamp+t;return i.delay=s-e,s-e}return i.delay=i.timestamp-e,i.delay}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ki(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s,r,n=t.call(i),o=[];try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(l){r={error:l}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(r)throw r.error}}return o}var ae;(function(i){i[i.NotStarted=0]="NotStarted",i[i.Running=1]="Running",i[i.Stopped=2]="Stopped"})(ae||(ae={}));var Un={type:"xstate.init"};function Xt(i){return i===void 0?[]:[].concat(i)}function oe(i){return{type:"xstate.assign",assignment:i}}function Qi(i,e){return typeof(i=typeof i=="string"&&e&&e[i]?e[i]:i)=="string"?{type:i}:typeof i=="function"?{type:i.name,exec:i}:i}function Ct(i){return function(e){return i===e}}function Vn(i){return typeof i=="string"?{type:i}:i}function qi(i,e){return{value:i,context:e,actions:[],changed:!1,matches:Ct(i)}}function er(i,e,t){var s=e,r=!1;return[i.filter(function(n){if(n.type==="xstate.assign"){r=!0;var o=Object.assign({},s);return typeof n.assignment=="function"?o=n.assignment(s,t):Object.keys(n.assignment).forEach(function(l){o[l]=typeof n.assignment[l]=="function"?n.assignment[l](s,t):n.assignment[l]}),s=o,!1}return!0}),s,r]}function Wn(i,e){e===void 0&&(e={});var t=Ki(er(Xt(i.states[i.initial].entry).map(function(o){return Qi(o,e.actions)}),i.context,Un),2),s=t[0],r=t[1],n={config:i,_options:e,initialState:{value:i.initial,actions:s,context:r,matches:Ct(i.initial)},transition:function(o,l){var a,u,c=typeof o=="string"?{value:o,context:i.context}:o,f=c.value,h=c.context,d=Vn(l),g=i.states[f];if(g.on){var b=Xt(g.on[d.type]);try{for(var p=function(B){var kt=typeof Symbol=="function"&&Symbol.iterator,ti=kt&&B[kt],si=0;if(ti)return ti.call(B);if(B&&typeof B.length=="number")return{next:function(){return B&&si>=B.length&&(B=void 0),{value:B&&B[si++],done:!B}}};throw new TypeError(kt?"Object is not iterable.":"Symbol.iterator is not defined.")}(b),m=p.next();!m.done;m=p.next()){var w=m.value;if(w===void 0)return qi(f,h);var v=typeof w=="string"?{target:w}:w,S=v.target,$=v.actions,F=$===void 0?[]:$,Y=v.cond,L=Y===void 0?function(){return!0}:Y,H=S===void 0,te=S!=null?S:f,Yn=i.states[te];if(L(h,d)){var _t=Ki(er((H?Xt(F):[].concat(g.exit,F,Yn.entry).filter(function(B){return B})).map(function(B){return Qi(B,n._options.actions)}),h,d),3),qs=_t[0],jn=_t[1],Zn=_t[2],ei=S!=null?S:f;return{value:ei,context:jn,actions:qs,changed:S!==f||qs.length>0||Zn,matches:Ct(ei)}}}}catch(B){a={error:B}}finally{try{m&&!m.done&&(u=p.return)&&u.call(p)}finally{if(a)throw a.error}}}return qi(f,h)}};return n}var tr=function(i,e){return i.actions.forEach(function(t){var s=t.exec;return s&&s(i.context,e)})};function zn(i){var e=i.initialState,t=ae.NotStarted,s=new Set,r={_machine:i,send:function(n){t===ae.Running&&(e=i.transition(e,n),tr(e,Vn(n)),s.forEach(function(o){return o(e)}))},subscribe:function(n){return s.add(n),n(e),{unsubscribe:function(){return s.delete(n)}}},start:function(n){if(n){var o=typeof n=="object"?n:{context:i.config.context,value:n};e={value:o.value,actions:[],context:o.context,matches:Ct(o.value)}}return t=ae.Running,tr(e,Un),r},stop:function(){return t=ae.Stopped,s.clear(),r},get state(){return e},get status(){return t}};return r}function Xc(i,e){for(let t=i.length-1;t>=0;t--){const s=i[t];if(s.type===P.Meta&&s.timestamp<=e)return i.slice(t)}return i}function Hc(i,{getCastFn:e,applyEventsSynchronously:t,emitter:s}){const r=Wn({id:"player",context:i,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:oe({lastPlayedEvent:(n,o)=>o.type==="CAST_EVENT"?o.payload.event:n.lastPlayedEvent}),recordTimeOffset:oe((n,o)=>{let l=n.timeOffset;return"payload"in o&&"timeOffset"in o.payload&&(l=o.payload.timeOffset),U(D({},n),{timeOffset:l,baselineTime:n.events[0].timestamp+l})}),play(n){var o;const{timer:l,events:a,baselineTime:u,lastPlayedEvent:c}=n;l.clear();for(const g of a)Ji(g,u);const f=Xc(a,u);let h=c==null?void 0:c.timestamp;(c==null?void 0:c.type)===P.IncrementalSnapshot&&c.data.source===N.MouseMove&&(h=c.timestamp+((o=c.data.positions[0])==null?void 0:o.timeOffset)),u<(h||0)&&s.emit(R.PlayBack);const d=new Array;for(const g of f)if(!(h&&h<u&&(g.timestamp<=h||g===c)))if(g.timestamp<u)d.push(g);else{const b=e(g,!1);l.addAction({doAction:()=>{b()},delay:g.delay})}t(d),s.emit(R.Flush),l.start()},pause(n){n.timer.clear()},resetLastPlayedEvent:oe(n=>U(D({},n),{lastPlayedEvent:null})),startLive:oe({baselineTime:(n,o)=>(n.timer.start(),o.type==="TO_LIVE"&&o.payload.baselineTime?o.payload.baselineTime:Date.now())}),addEvent:oe((n,o)=>{const{baselineTime:l,timer:a,events:u}=n;if(o.type==="ADD_EVENT"){const{event:c}=o.payload;Ji(c,l);let f=u.length-1;if(!u[f]||u[f].timestamp<=c.timestamp)u.push(c);else{let g=-1,b=0;for(;b<=f;){const p=Math.floor((b+f)/2);u[p].timestamp<=c.timestamp?b=p+1:f=p-1}g===-1&&(g=b),u.splice(g,0,c)}const h=c.timestamp<l,d=e(c,h);h?d():a.isActive()&&a.addAction({doAction:()=>{d()},delay:c.delay})}return U(D({},n),{events:u})})}});return zn(r)}function Jc(i){const e=Wn({id:"speed",context:i,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(t,s)=>{"payload"in s&&t.timer.setSpeed(s.payload.speed)},recordSpeed:oe({normalSpeed:t=>t.timer.speed}),restoreSpeed:t=>{t.timer.setSpeed(t.normalSpeed)}}});return zn(e)}const Kc=i=>[`.${i} { background: currentColor }`,"noscript { display: none !important; }"],sr=new Map;function Gn(i,e){let t=sr.get(i);return t||(t=new Map,sr.set(i,t)),t.has(e)||t.set(e,[]),t.get(e)}function q(i,e,t){return async s=>{if(s&&typeof s=="object"&&"rr_type"in s)if(t&&(t.isUnchanged=!1),s.rr_type==="ImageBitmap"&&"args"in s){const r=await q(i,e,t)(s.args);return await createImageBitmap.apply(null,r)}else if("index"in s){if(t||e===null)return s;const{rr_type:r,index:n}=s;return Gn(e,r)[n]}else if("args"in s){const{rr_type:r,args:n}=s,o=window[r];return new o(...await Promise.all(n.map(q(i,e,t))))}else{if("base64"in s)return Wc(s.base64);if("src"in s){const r=i.get(s.src);if(r)return r;{const n=new Image;return n.src=s.src,i.set(s.src,n),n}}else if("data"in s&&s.rr_type==="Blob"){const r=await Promise.all(s.data.map(q(i,e,t)));return new Blob(r,{type:s.type})}}else if(Array.isArray(s))return await Promise.all(s.map(q(i,e,t)));return s}}function Qc(i,e){try{return e===bt.WebGL?i.getContext("webgl")||i.getContext("experimental-webgl"):i.getContext("webgl2")}catch(t){return null}}const qc=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function eh(i,e){if(!(e!=null&&e.constructor))return;const{name:t}=e.constructor;if(!qc.includes(t))return;const s=Gn(i,t);s.includes(e)||s.push(e)}async function th({mutation:i,target:e,type:t,imageMap:s,errorHandler:r}){try{const n=Qc(e,t);if(!n)return;if(i.setter){n[i.property]=i.args[0];return}const o=n[i.property],l=await Promise.all(i.args.map(q(s,n))),a=o.apply(n,l);eh(n,a);const u=!1}catch(n){r(i,n)}}async function sh({event:i,mutations:e,target:t,imageMap:s,errorHandler:r}){const n=t.getContext("2d");if(!n){r(e[0],new Error("Canvas context is null"));return}const o=e.map(async a=>Promise.all(a.args.map(q(s,n))));(await Promise.all(o)).forEach((a,u)=>{const c=e[u];try{if(c.setter){n[c.property]=c.args[0];return}const f=n[c.property];c.property==="drawImage"&&typeof c.args[0]=="string"?(s.get(i),f.apply(n,c.args)):f.apply(n,a)}catch(f){r(c,f)}})}async function ir({event:i,mutation:e,target:t,imageMap:s,canvasEventMap:r,errorHandler:n}){try{const o=r.get(i)||e,l="commands"in o?o.commands:[o];if([bt.WebGL,bt.WebGL2].includes(e.type)){for(let a=0;a<l.length;a++){const u=l[a];await th({mutation:u,type:e.type,target:t,imageMap:s,errorHandler:n})}return}await sh({event:i,mutations:l,target:t,imageMap:s,errorHandler:n})}catch(o){n(e,o)}}class ih{constructor(e){C(this,"mediaMap",new Map),C(this,"warn"),C(this,"service"),C(this,"speedService"),C(this,"emitter"),C(this,"getCurrentTime"),C(this,"metadataCallbackMap",new Map),this.warn=e.warn,this.service=e.service,this.speedService=e.speedService,this.emitter=e.emitter,this.getCurrentTime=e.getCurrentTime,this.emitter.on(R.Start,this.start.bind(this)),this.emitter.on(R.SkipStart,this.start.bind(this)),this.emitter.on(R.Pause,this.pause.bind(this)),this.emitter.on(R.Finish,this.pause.bind(this)),this.speedService.subscribe(()=>{this.syncAllMediaElements()})}syncAllMediaElements(e={pause:!1}){this.mediaMap.forEach((t,s)=>{this.syncTargetWithState(s),e.pause&&s.pause()})}start(){this.syncAllMediaElements()}pause(){this.syncAllMediaElements({pause:!0})}seekTo({time:e,target:t,mediaState:s}){if(s.isPlaying){const n=(e-s.lastInteractionTimeOffset)/1e3*s.playbackRate,o="duration"in t&&t.duration;if(Number.isNaN(o)){this.waitForMetadata(t);return}let l=s.currentTimeAtLastInteraction+n;t.loop&&o!==!1&&(l=l%o),t.currentTime=l}else t.pause(),t.currentTime=s.currentTimeAtLastInteraction}waitForMetadata(e){if(this.metadataCallbackMap.has(e)||!("addEventListener"in e))return;const t=()=>{this.metadataCallbackMap.delete(e);const s=this.mediaMap.get(e);s&&this.seekTo({time:this.getCurrentTime(),target:e,mediaState:s})};this.metadataCallbackMap.set(e,t),e.addEventListener("loadedmetadata",t,{once:!0})}getMediaStateFromMutation({target:e,timeOffset:t,mutation:s}){var d,g,b,p,m;const r=this.mediaMap.get(e),{type:n,playbackRate:o,currentTime:l,muted:a,volume:u,loop:c}=s;return{isPlaying:n===Ms.Play||n!==Ms.Pause&&((r==null?void 0:r.isPlaying)||e.getAttribute("autoplay")!==null),currentTimeAtLastInteraction:(d=l!=null?l:r==null?void 0:r.currentTimeAtLastInteraction)!=null?d:0,lastInteractionTimeOffset:t,playbackRate:(g=o!=null?o:r==null?void 0:r.playbackRate)!=null?g:1,volume:(b=u!=null?u:r==null?void 0:r.volume)!=null?b:1,muted:(p=a!=null?a:r==null?void 0:r.muted)!=null?p:e.getAttribute("muted")===null,loop:(m=c!=null?c:r==null?void 0:r.loop)!=null?m:e.getAttribute("loop")===null}}syncTargetWithState(e){const t=this.mediaMap.get(e);if(!t)return;const{muted:s,loop:r,volume:n,isPlaying:o}=t,l=this.service.state.matches("paused"),a=t.playbackRate*this.speedService.state.context.timer.speed;try{this.seekTo({time:this.getCurrentTime(),target:e,mediaState:t}),e.volume!==n&&(e.volume=n),e.muted=s,e.loop=r,e.playbackRate!==a&&(e.playbackRate=a),o&&!l?e.play():e.pause()}catch(u){this.warn(`Failed to replay media interactions: ${u.message||u}`)}}addMediaElements(e,t,s){if(!["AUDIO","VIDEO"].includes(e.nodeName))return;const r=e,n=s.getMeta(r);if(!n||!("attributes"in n))return;const o=this.service.state.matches("paused"),l=n.attributes;let a=!1;l.rr_mediaState?a=l.rr_mediaState==="played":a=r.getAttribute("autoplay")!==null,a&&o&&r.pause();let u=1;typeof l.rr_mediaPlaybackRate=="number"&&(u=l.rr_mediaPlaybackRate);let c=!1;typeof l.rr_mediaMuted=="boolean"?c=l.rr_mediaMuted:c=r.getAttribute("muted")!==null;let f=!1;typeof l.rr_mediaLoop=="boolean"?f=l.rr_mediaLoop:f=r.getAttribute("loop")!==null;let h=1;typeof l.rr_mediaVolume=="number"&&(h=l.rr_mediaVolume);let d=0;typeof l.rr_mediaCurrentTime=="number"&&(d=l.rr_mediaCurrentTime),this.mediaMap.set(r,{isPlaying:a,currentTimeAtLastInteraction:d,lastInteractionTimeOffset:t,playbackRate:u,volume:h,muted:c,loop:f}),this.syncTargetWithState(r)}mediaMutation({target:e,timeOffset:t,mutation:s}){this.mediaMap.set(e,this.getMediaStateFromMutation({target:e,timeOffset:t,mutation:s})),this.syncTargetWithState(e)}isSupportedMediaElement(e){return["AUDIO","VIDEO"].includes(e.nodeName)}reset(){this.mediaMap.clear()}}function nt(i,e){if(i.nodeName!=="DIALOG"||i instanceof G)return;const t=i,s=t.open,r=s&&t.matches("dialog:modal"),n=t.getAttribute("rr_open_mode"),o=typeof(e==null?void 0:e.attributes.open)=="string"||typeof t.getAttribute("open")=="string",l=n==="modal";if(!(s&&!(r&&n==="non-modal"||!r&&l))){if(!t.isConnected){console.warn("dialog is not attached to the dom",t);return}s&&t.close(),o&&(l?t.showModal():t.show())}}function rh(i,e){if(i.nodeName!=="DIALOG"||i instanceof G)return;const t=i;if(!t.isConnected){console.warn("dialog is not attached to the dom",t);return}e.attributes.open===null&&(t.removeAttribute("open"),t.removeAttribute("rr_open_mode"))}const nh=5*1e3,oh=Fn||Yc,rr="[replayer]",Ht={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function nr(i){return i.type==P.IncrementalSnapshot&&(i.data.source==N.TouchMove||i.data.source==N.MouseInteraction&&i.data.type==k.TouchStart)}class ah{constructor(e,t){if(C(this,"wrapper"),C(this,"iframe"),C(this,"service"),C(this,"speedService"),C(this,"config"),C(this,"usingVirtualDom",!1),C(this,"virtualDom",new de),C(this,"mouse"),C(this,"mouseTail",null),C(this,"tailPositions",[]),C(this,"emitter",oh()),C(this,"nextUserInteractionEvent"),C(this,"legacy_missingNodeRetryMap",{}),C(this,"cache",Ri()),C(this,"imageMap",new Map),C(this,"canvasEventMap",new Map),C(this,"mirror",ar()),C(this,"styleMirror",new Vc),C(this,"mediaManager"),C(this,"firstFullSnapshot",null),C(this,"newDocumentQueue",[]),C(this,"mousePos",null),C(this,"touchActive",null),C(this,"lastMouseDownEvent",null),C(this,"lastHoveredRootNode"),C(this,"lastSelectionData",null),C(this,"constructedStyleMutations",[]),C(this,"adoptedStyleSheets",[]),C(this,"handleResize",l=>{this.iframe.style.display="inherit";for(const a of[this.mouseTail,this.iframe])a&&(a.setAttribute("width",String(l.width)),a.setAttribute("height",String(l.height)))}),C(this,"applyEventsSynchronously",l=>{for(const a of l){switch(a.type){case P.DomContentLoaded:case P.Load:case P.Custom:continue;case P.FullSnapshot:case P.Meta:case P.Plugin:case P.IncrementalSnapshot:break}this.getCastFn(a,!0)()}}),C(this,"getCastFn",(l,a=!1)=>{let u;switch(l.type){case P.DomContentLoaded:case P.Load:break;case P.Custom:u=()=>{this.emitter.emit(R.CustomEvent,l)};break;case P.Meta:u=()=>this.emitter.emit(R.Resize,{width:l.data.width,height:l.data.height});break;case P.FullSnapshot:u=()=>{var f;if(this.firstFullSnapshot){if(this.firstFullSnapshot===l){this.firstFullSnapshot=!0;return}}else this.firstFullSnapshot=!0;this.mediaManager.reset(),this.styleMirror.reset(),this.rebuildFullSnapshot(l,a),(f=this.iframe.contentWindow)==null||f.scrollTo(l.data.initialOffset)};break;case P.IncrementalSnapshot:u=()=>{if(this.applyIncremental(l,a),!a&&(l===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const f of this.service.state.context.events)if(!(f.timestamp<=l.timestamp)&&this.isUserInteraction(f)){f.delay-l.delay>this.config.inactivePeriodThreshold*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=f);break}if(this.nextUserInteractionEvent){const f=this.nextUserInteractionEvent.delay-l.delay,h={speed:Math.min(Math.round(f/nh),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:h}),this.emitter.emit(R.SkipStart,h)}}};break}return()=>{u&&u();for(const h of this.config.plugins||[])h.handler&&h.handler(l,a,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:l}});const f=this.service.state.context.events.length-1;if(!this.config.liveMode&&l===this.service.state.context.events[f]){const h=()=>{f<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(R.Finish))};let d=50;l.type===P.IncrementalSnapshot&&l.data.source===N.MouseMove&&l.data.positions.length&&(d+=Math.max(0,-l.data.positions[0].timeOffset)),setTimeout(h,d)}this.emitter.emit(R.EventCast,l)}}),!(t!=null&&t.liveMode)&&e.length<2)throw new Error("Replayer need at least 2 events.");const s={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,inactivePeriodThreshold:10*1e3,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:Ht,useVirtualDom:!0,logger:console};this.config=Object.assign({},s,t),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(R.Resize,this.handleResize),this.setupDom();for(const l of this.config.plugins||[])l.getMirror&&l.getMirror({nodeMirror:this.mirror});this.emitter.on(R.Flush,()=>{if(this.usingVirtualDom){const l={mirror:this.mirror,applyCanvas:(a,u,c)=>{ir({event:a,mutation:u,target:c,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:(a,u)=>{a.source===N.StyleSheetRule?this.applyStyleSheetRule(a,u):a.source===N.StyleDeclaration&&this.applyStyleDeclaration(a,u)},afterAppend:(a,u)=>{for(const c of this.config.plugins||[])c.onBuild&&c.onBuild(a,{id:u,replayer:this})}};if(this.iframe.contentDocument)try{wt(this.iframe.contentDocument,this.virtualDom,l,this.virtualDom.mirror)}catch(a){console.warn(a)}if(this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const a in this.legacy_missingNodeRetryMap)try{const u=this.legacy_missingNodeRetryMap[a],c=vt(u.node,this.mirror,this.virtualDom.mirror);wt(c,u.node,l,this.virtualDom.mirror),u.node=c}catch(u){this.warn(u)}this.constructedStyleMutations.forEach(a=>{this.applyStyleSheetMutation(a)}),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach(a=>{this.applyAdoptedStyleSheet(a)}),this.adoptedStyleSheets=[]}if(this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),this.touchActive===!0?this.mouse.classList.add("touch-active"):this.touchActive===!1&&this.mouse.classList.remove("touch-active"),this.touchActive=null,this.lastMouseDownEvent){const[l,a]=this.lastMouseDownEvent;l.dispatchEvent(a)}this.lastMouseDownEvent=null,this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)}),this.emitter.on(R.PlayBack,()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset()});const r=new Zc([],{speed:this.config.speed});this.service=Hc({events:e.map(l=>t&&t.unpackFn?t.unpackFn(l):l).sort((l,a)=>l.timestamp-a.timestamp),timer:r,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(l=>{this.emitter.emit(R.StateChange,{player:l})}),this.speedService=Jc({normalSpeed:-1,timer:r}),this.speedService.start(),this.speedService.subscribe(l=>{this.emitter.emit(R.StateChange,{speed:l})}),this.mediaManager=new ih({warn:this.warn.bind(this),service:this.service,speedService:this.speedService,emitter:this.emitter,getCurrentTime:this.getCurrentTime.bind(this)});const n=this.service.state.context.events.find(l=>l.type===P.Meta),o=this.service.state.context.events.find(l=>l.type===P.FullSnapshot);if(n){const{width:l,height:a}=n.data;setTimeout(()=>{this.emitter.emit(R.Resize,{width:l,height:a})},0)}o&&setTimeout(()=>{var l;this.firstFullSnapshot||(this.firstFullSnapshot=o,this.rebuildFullSnapshot(o),(l=this.iframe.contentWindow)==null||l.scrollTo(o.data.initialOffset))},1),this.service.state.context.events.find(nr)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}setConfig(e){Object.keys(e).forEach(t=>{e[t],this.config[t]=e[t]}),this.config.skipInactive||this.backToNormal(),typeof e.speed!="undefined"&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),typeof e.mouseTail!="undefined"&&(e.mouseTail===!1?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const e=this.service.state.context.events[0],t=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:t.timestamp,totalTime:t.timestamp-e.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:e,events:t}=this.service.state.context;return e-t[0].timestamp}getMirror(){return this.mirror}play(e=0){var t,s;this.service.state.matches("paused")?this.service.send({type:"PLAY",payload:{timeOffset:e}}):(this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}})),(s=(t=this.iframe.contentDocument)==null?void 0:t.getElementsByTagName("html")[0])==null||s.classList.remove("rrweb-paused"),this.emitter.emit(R.Start)}pause(e){var t,s;e===void 0&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),typeof e=="number"&&(this.play(e),this.service.send({type:"PAUSE"})),(s=(t=this.iframe.contentDocument)==null?void 0:t.getElementsByTagName("html")[0])==null||s.classList.add("rrweb-paused"),this.emitter.emit(R.Pause)}resume(e=0){this.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(R.Resume)}destroy(){this.pause(),this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset(),this.config.root.removeChild(this.wrapper),this.emitter.emit(R.Destroy)}startLive(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})}addEvent(e){const t=this.config.unpackFn?this.config.unpackFn(e):e;nr(t)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(()=>this.service.send({type:"ADD_EVENT",payload:{event:t}}))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=Ri()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),this.config.mouseTail!==!1&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(jc(this.iframe.contentWindow,this.iframe.contentDocument),Bc(this.iframe.contentWindow))}rebuildFullSnapshot(e,t=!1){if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&this.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const s=[],r=new Set,n=(a,u)=>{if(a.nodeName==="DIALOG"&&r.add(a),this.collectIframeAndAttachDocument(s,a),this.mediaManager.isSupportedMediaElement(a)){const{events:c}=this.service.state.context;this.mediaManager.addMediaElements(a,e.timestamp-c[0].timestamp,this.mirror)}for(const c of this.config.plugins||[])c.onBuild&&c.onBuild(a,{id:u,replayer:this})};this.usingVirtualDom&&(this.virtualDom.destroyTree(),this.usingVirtualDom=!1),this.mirror.reset(),il(e.data.node,{doc:this.iframe.contentDocument,afterAppend:n,cache:this.cache,mirror:this.mirror}),n(this.iframe.contentDocument,e.data.node.id);for(const{mutationInQueue:a,builtNode:u}of s)this.attachDocumentToIframe(a,u),this.newDocumentQueue=this.newDocumentQueue.filter(c=>c!==a);const{documentElement:o,head:l}=this.iframe.contentDocument;this.insertStyleRules(o,l),r.forEach(a=>nt(a)),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(R.FullsnapshotRebuilded,e),t||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(e,t){var s;const r=Kc(this.config.blockClass).concat(this.config.insertStyleRules);if(this.config.pauseAnimation&&r.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),!!r.length)if(this.usingVirtualDom){const n=this.virtualDom.createElement("style");this.virtualDom.mirror.add(n,_n(n,this.virtualDom.unserializedId)),e.insertBefore(n,t),n.rules.push({source:N.StyleSheetRule,adds:r.map((o,l)=>({rule:o,index:l}))})}else{const n=document.createElement("style");e.insertBefore(n,t);for(let o=0;o<r.length;o++)(s=n.sheet)==null||s.insertRule(r[o],o)}}attachDocumentToIframe(e,t){const s=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,r=[],n=new Set,o=(l,a)=>{l.nodeName==="DIALOG"&&n.add(l),this.collectIframeAndAttachDocument(r,l);const u=s.getMeta(l);if((u==null?void 0:u.type)===Q.Element&&(u==null?void 0:u.tagName.toUpperCase())==="HTML"){const{documentElement:c,head:f}=t.contentDocument;this.insertStyleRules(c,f)}if(!this.usingVirtualDom)for(const c of this.config.plugins||[])c.onBuild&&c.onBuild(l,{id:a,replayer:this})};Re(e.node,{doc:t.contentDocument,mirror:s,hackCss:!0,skipChild:!1,afterAppend:o,cache:this.cache}),o(t.contentDocument,e.node.id);for(const{mutationInQueue:l,builtNode:a}of r)this.attachDocumentToIframe(l,a),this.newDocumentQueue=this.newDocumentQueue.filter(u=>u!==l);n.forEach(l=>nt(l))}collectIframeAndAttachDocument(e,t){if(Zt(t,this.mirror)){const s=this.newDocumentQueue.find(r=>r.parentId===this.mirror.getId(t));s&&e.push({mutationInQueue:s,builtNode:t})}}waitForStylesheetLoad(){var e;const t=(e=this.iframe.contentDocument)==null?void 0:e.head;if(t){const s=new Set;let r,n=this.service.state;const o=()=>{n=this.service.state};this.emitter.on(R.Start,o),this.emitter.on(R.Pause,o);const l=()=>{this.emitter.off(R.Start,o),this.emitter.off(R.Pause,o)};t.querySelectorAll('link[rel="stylesheet"]').forEach(a=>{a.sheet||(s.add(a),a.addEventListener("load",()=>{s.delete(a),s.size===0&&r!==-1&&(n.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(R.LoadStylesheetEnd),r&&clearTimeout(r),l())}))}),s.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(R.LoadStylesheetStart),r=setTimeout(()=>{n.matches("playing")&&this.play(this.getCurrentTime()),r=-1,l()},this.config.loadTimeout))}}async preloadAllImages(){const e=[];for(const t of this.service.state.context.events)t.type===P.IncrementalSnapshot&&t.data.source===N.CanvasMutation&&(e.push(this.deserializeAndPreloadCanvasEvents(t.data,t)),("commands"in t.data?t.data.commands:[t.data]).forEach(r=>{this.preloadImages(r,t)}));return Promise.all(e)}preloadImages(e,t){if(e.property==="drawImage"&&typeof e.args[0]=="string"&&!this.imageMap.has(t)){const s=document.createElement("canvas"),r=s.getContext("2d"),n=r==null?void 0:r.createImageData(s.width,s.height);r==null||r.putImageData(n,0,0)}}async deserializeAndPreloadCanvasEvents(e,t){if(!this.canvasEventMap.has(t)){const s={isUnchanged:!0};if("commands"in e){const r=await Promise.all(e.commands.map(async n=>{const o=await Promise.all(n.args.map(q(this.imageMap,null,s)));return U(D({},n),{args:o})}));s.isUnchanged===!1&&this.canvasEventMap.set(t,U(D({},e),{commands:r}))}else{const r=await Promise.all(e.args.map(q(this.imageMap,null,s)));s.isUnchanged===!1&&this.canvasEventMap.set(t,U(D({},e),{args:r}))}}}applyIncremental(e,t){var s,r,n;const{data:o}=e;switch(o.source){case N.Mutation:{try{this.applyMutation(o,t)}catch(l){this.warn(`Exception in mutation ${l.message||l}`,o)}break}case N.Drag:case N.TouchMove:case N.MouseMove:if(t){const l=o.positions[o.positions.length-1];this.mousePos={x:l.x,y:l.y,id:l.id,debugData:o}}else o.positions.forEach(l=>{const a={doAction:()=>{this.moveAndHover(l.x,l.y,l.id,t,o)},delay:l.timeOffset+e.timestamp-this.service.state.context.baselineTime};this.timer.addAction(a)}),this.timer.addAction({doAction(){},delay:e.delay-((s=o.positions[0])==null?void 0:s.timeOffset)});break;case N.MouseInteraction:{if(o.id===-1)break;const l=new Event(so(k[o.type])),a=this.mirror.getNode(o.id);if(!a)return this.debugNodeNotFound(o,o.id);this.emitter.emit(R.MouseInteraction,{type:o.type,target:a});const{triggerFocus:u}=this.config;switch(o.type){case k.Blur:"blur"in a&&a.blur();break;case k.Focus:u&&a.focus&&a.focus({preventScroll:!0});break;case k.Click:case k.TouchStart:case k.TouchEnd:case k.MouseDown:case k.MouseUp:t?(o.type===k.TouchStart?this.touchActive=!0:o.type===k.TouchEnd&&(this.touchActive=!1),o.type===k.MouseDown?this.lastMouseDownEvent=[a,l]:o.type===k.MouseUp&&(this.lastMouseDownEvent=null),this.mousePos={x:o.x||0,y:o.y||0,id:o.id,debugData:o}):(o.type===k.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(o.x||0,o.y||0,o.id,t,o),o.type===k.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):o.type===k.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):o.type===k.TouchEnd?this.mouse.classList.remove("touch-active"):a.dispatchEvent(l));break;case k.TouchCancel:t?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:a.dispatchEvent(l)}break}case N.Scroll:{if(o.id===-1)break;if(this.usingVirtualDom){const l=this.virtualDom.mirror.getNode(o.id);if(!l)return this.debugNodeNotFound(o,o.id);l.scrollData=o;break}this.applyScroll(o,t);break}case N.ViewportResize:this.emitter.emit(R.Resize,{width:o.width,height:o.height});break;case N.Input:{if(o.id===-1)break;if(this.usingVirtualDom){const l=this.virtualDom.mirror.getNode(o.id);if(!l)return this.debugNodeNotFound(o,o.id);l.inputData=o;break}this.applyInput(o);break}case N.MediaInteraction:{const l=this.usingVirtualDom?this.virtualDom.mirror.getNode(o.id):this.mirror.getNode(o.id);if(!l)return this.debugNodeNotFound(o,o.id);const a=l,{events:u}=this.service.state.context;this.mediaManager.mediaMutation({target:a,timeOffset:e.timestamp-u[0].timestamp,mutation:o});break}case N.StyleSheetRule:case N.StyleDeclaration:{this.usingVirtualDom?o.styleId?this.constructedStyleMutations.push(o):o.id&&((r=this.virtualDom.mirror.getNode(o.id))==null||r.rules.push(o)):this.applyStyleSheetMutation(o);break}case N.CanvasMutation:{if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const l=this.virtualDom.mirror.getNode(o.id);if(!l)return this.debugNodeNotFound(o,o.id);l.canvasMutations.push({event:e,mutation:o})}else{const l=this.mirror.getNode(o.id);if(!l)return this.debugNodeNotFound(o,o.id);ir({event:e,mutation:o,target:l,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break}case N.Font:{try{const l=new FontFace(o.family,o.buffer?new Uint8Array(JSON.parse(o.fontSource)):o.fontSource,o.descriptors);(n=this.iframe.contentDocument)==null||n.fonts.add(l)}catch(l){this.warn(l)}break}case N.Selection:{if(t){this.lastSelectionData=o;break}this.applySelection(o);break}case N.AdoptedStyleSheet:{this.usingVirtualDom?this.adoptedStyleSheets.push(o):this.applyAdoptedStyleSheet(o);break}}}applyMutation(e,t){if(this.config.useVirtualDom&&!this.usingVirtualDom&&t&&(this.usingVirtualDom=!0,Cc(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const u in this.legacy_missingNodeRetryMap)try{const c=this.legacy_missingNodeRetryMap[u],f=Pn(c.node,this.virtualDom,this.mirror);f&&(c.node=f)}catch(c){this.warn(c)}const s=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;e.removes=e.removes.filter(u=>s.getNode(u.id)?!0:(this.warnNodeNotFound(e,u.id),!1)),e.removes.forEach(u=>{var c;const f=s.getNode(u.id);if(!f)return;let h=s.getNode(u.parentId);if(!h)return this.warnNodeNotFound(e,u.parentId);if(u.isShadow&&it(h)&&(h=h.shadowRoot),s.removeNodeFromMap(f),h)try{h.removeChild(f),this.usingVirtualDom&&f.nodeName==="#text"&&h.nodeName==="STYLE"&&((c=h.rules)==null?void 0:c.length)>0&&(h.rules=[])}catch(d){if(d instanceof DOMException)this.warn("parent could not remove child in mutation",h,f,e);else throw d}});const r=D({},this.legacy_missingNodeRetryMap),n=[],o=u=>{let c=null;return u.nextId&&(c=s.getNode(u.nextId)),u.nextId!==null&&u.nextId!==void 0&&u.nextId!==-1&&!c},l=u=>{var c,f;if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");let h=s.getNode(u.parentId);if(!h)return u.node.type===Q.Document?this.newDocumentQueue.push(u):n.push(u);u.node.isShadow&&(it(h)||h.attachShadow({mode:"open"}),h=h.shadowRoot);let d=null,g=null;if(u.previousId&&(d=s.getNode(u.previousId)),u.nextId&&(g=s.getNode(u.nextId)),o(u))return n.push(u);if(u.node.rootId&&!s.getNode(u.node.rootId))return;const b=u.node.rootId?s.getNode(u.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(Zt(h,s)){this.attachDocumentToIframe(u,h);return}const p=(v,S)=>{if(!this.usingVirtualDom){nt(v);for(const $ of this.config.plugins||[])$.onBuild&&$.onBuild(v,{id:S,replayer:this})}},m=Re(u.node,{doc:b,mirror:s,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:p});if(u.previousId===-1||u.nextId===-1){r[u.node.id]={node:m,mutation:u};return}const w=s.getMeta(h);if(w&&w.type===Q.Element&&u.node.type===Q.Text){const v=Array.isArray(h.childNodes)?h.childNodes:Array.from(h.childNodes);if(w.tagName==="textarea")for(const S of v)S.nodeType===h.TEXT_NODE&&h.removeChild(S);else if(w.tagName==="style"&&v.length===1)for(const S of v)S.nodeType===h.TEXT_NODE&&!s.hasNode(S)&&(m.textContent=S.textContent,h.removeChild(S))}else if((w==null?void 0:w.type)===Q.Document){const v=h;u.node.type===Q.DocumentType&&((c=v.childNodes[0])==null?void 0:c.nodeType)===Node.DOCUMENT_TYPE_NODE&&v.removeChild(v.childNodes[0]),m.nodeName==="HTML"&&v.documentElement&&v.removeChild(v.documentElement)}if(d&&d.nextSibling&&d.nextSibling.parentNode?h.insertBefore(m,d.nextSibling):g&&g.parentNode?h.contains(g)?h.insertBefore(m,g):h.insertBefore(m,null):h.appendChild(m),p(m,u.node.id),this.usingVirtualDom&&m.nodeName==="#text"&&h.nodeName==="STYLE"&&((f=h.rules)==null?void 0:f.length)>0&&(h.rules=[]),Zt(m,this.mirror)){const v=this.mirror.getId(m),S=this.newDocumentQueue.find($=>$.parentId===v);S&&(this.attachDocumentToIframe(S,m),this.newDocumentQueue=this.newDocumentQueue.filter($=>$!==S))}(u.previousId||u.nextId)&&this.legacy_resolveMissingNode(r,h,m,u)};e.adds.forEach(u=>{l(u)});const a=Date.now();for(;n.length;){const u=Fc(n);if(n.length=0,Date.now()-a>500){this.warn("Timeout in the loop, please check the resolve tree data:",u);break}for(const c of u)s.getNode(c.value.parentId)?Ln(c,h=>{l(h)}):this.debug("Drop resolve tree since there is no parent for the root node.",c)}Object.keys(r).length&&Object.assign(this.legacy_missingNodeRetryMap,r),Uc(e.texts).forEach(u=>{var c;const f=s.getNode(u.id);if(!f)return e.removes.find(d=>d.id===u.id)?void 0:this.warnNodeNotFound(e,u.id);const h=f.parentElement;if(u.value&&h&&h.tagName==="STYLE"?f.textContent=Nt(u.value,this.cache):f.textContent=u.value,this.usingVirtualDom){const d=f.parentNode;((c=d==null?void 0:d.rules)==null?void 0:c.length)>0&&(d.rules=[])}}),e.attributes.forEach(u=>{var c;const f=s.getNode(u.id);if(!f)return e.removes.find(h=>h.id===u.id)?void 0:this.warnNodeNotFound(e,u.id);for(const h in u.attributes)if(typeof h=="string"){const d=u.attributes[h];if(d===null)f.removeAttribute(h),h==="open"&&rh(f,u);else if(typeof d=="string")try{if(h==="_cssText"&&(f.nodeName==="LINK"||f.nodeName==="STYLE"))try{const g=s.getMeta(f);Object.assign(g.attributes,u.attributes);const b=Re(g,{doc:f.ownerDocument,mirror:s,skipChild:!0,hackCss:!0,cache:this.cache}),p=f.nextSibling,m=f.parentNode;if(b&&m){m.removeChild(f),m.insertBefore(b,p),s.replace(u.id,b);break}}catch(g){}if(h==="value"&&f.nodeName==="TEXTAREA"){const g=f;g.childNodes.forEach(p=>g.removeChild(p));const b=(c=f.ownerDocument)==null?void 0:c.createTextNode(d);b&&g.appendChild(b)}else f.setAttribute(h,d);h==="rr_open_mode"&&f.nodeName==="DIALOG"&&nt(f,u)}catch(g){this.warn("An error occurred may due to the checkout feature.",g)}else if(h==="style"){const g=d,b=f;for(const p in g)if(g[p]===!1)b.style.removeProperty(p);else if(g[p]instanceof Array){const m=g[p];b.style.setProperty(p,m[0],m[1])}else{const m=g[p];b.style.setProperty(p,m)}}}})}applyScroll(e,t){var s,r;const n=this.mirror.getNode(e.id);if(!n)return this.debugNodeNotFound(e,e.id);const o=this.mirror.getMeta(n);if(n===this.iframe.contentDocument)(s=this.iframe.contentWindow)==null||s.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else if((o==null?void 0:o.type)===Q.Document)(r=n.defaultView)==null||r.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else try{n.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"})}catch(l){}}applyInput(e){const t=this.mirror.getNode(e.id);if(!t)return this.debugNodeNotFound(e,e.id);try{t.checked=e.isChecked,t.value=e.text}catch(s){}}applySelection(e){try{const t=new Set,s=e.ranges.map(({start:r,startOffset:n,end:o,endOffset:l})=>{const a=this.mirror.getNode(r),u=this.mirror.getNode(o);if(!a||!u)return;const c=new Range;c.setStart(a,n),c.setEnd(u,l);const f=a.ownerDocument,h=f==null?void 0:f.getSelection();return h&&t.add(h),{range:c,selection:h}});t.forEach(r=>r.removeAllRanges()),s.forEach(r=>{var n;return r&&((n=r.selection)==null?void 0:n.addRange(r.range))})}catch(t){}}applyStyleSheetMutation(e){var t;let s=null;e.styleId?s=this.styleMirror.getStyle(e.styleId):e.id&&(s=((t=this.mirror.getNode(e.id))==null?void 0:t.sheet)||null),s&&(e.source===N.StyleSheetRule?this.applyStyleSheetRule(e,s):e.source===N.StyleDeclaration&&this.applyStyleDeclaration(e,s))}applyStyleSheetRule(e,t){var s,r,n,o;if((s=e.adds)==null||s.forEach(({rule:l,index:a})=>{try{if(Array.isArray(a)){const{positions:u,index:c}=Xi(a);xe(t.cssRules,u).insertRule(l,c)}else{const u=a===void 0?void 0:Math.min(a,t.cssRules.length);t==null||t.insertRule(l,u)}}catch(u){}}),(r=e.removes)==null||r.forEach(({index:l})=>{try{if(Array.isArray(l)){const{positions:a,index:u}=Xi(l);xe(t.cssRules,a).deleteRule(u||0)}else t==null||t.deleteRule(l)}catch(a){}}),e.replace)try{(n=t.replace)==null||n.call(t,e.replace)}catch(l){}if(e.replaceSync)try{(o=t.replaceSync)==null||o.call(t,e.replaceSync)}catch(l){}}applyStyleDeclaration(e,t){e.set&&xe(t.rules,e.index).style.setProperty(e.set.property,e.set.value,e.set.priority),e.remove&&xe(t.rules,e.index).style.removeProperty(e.remove.property)}applyAdoptedStyleSheet(e){var t;const s=this.mirror.getNode(e.id);if(!s)return;(t=e.styles)==null||t.forEach(l=>{var a;let u=null,c=null;if(it(s)?c=((a=s.ownerDocument)==null?void 0:a.defaultView)||null:s.nodeName==="#document"&&(c=s.defaultView),!!c)try{u=new c.CSSStyleSheet,this.styleMirror.add(u,l.styleId),this.applyStyleSheetRule({source:N.StyleSheetRule,adds:l.rules},u)}catch(f){}});const r=10;let n=0;const o=(l,a)=>{const u=a.map(c=>this.styleMirror.getStyle(c)).filter(c=>c!==null);it(l)?l.shadowRoot.adoptedStyleSheets=u:l.nodeName==="#document"&&(l.adoptedStyleSheets=u),u.length!==a.length&&n<r&&(setTimeout(()=>o(l,a),0+100*n),n++)};o(s,e.styleIds)}legacy_resolveMissingNode(e,t,s,r){const{previousId:n,nextId:o}=r,l=n&&e[n],a=o&&e[o];if(l){const{node:u,mutation:c}=l;t.insertBefore(u,s),delete e[c.node.id],delete this.legacy_missingNodeRetryMap[c.node.id],(c.previousId||c.nextId)&&this.legacy_resolveMissingNode(e,t,u,c)}if(a){const{node:u,mutation:c}=a;t.insertBefore(u,s.nextSibling),delete e[c.node.id],delete this.legacy_missingNodeRetryMap[c.node.id],(c.previousId||c.nextId)&&this.legacy_resolveMissingNode(e,t,u,c)}}moveAndHover(e,t,s,r,n){const o=this.mirror.getNode(s);if(!o)return this.debugNodeNotFound(n,s);const l=Bn(o,this.iframe),a=e*l.absoluteScale+l.x,u=t*l.absoluteScale+l.y;this.mouse.style.left=`${a}px`,this.mouse.style.top=`${u}px`,r||this.drawMouseTail({x:a,y:u}),this.hoverElements(o)}drawMouseTail(e){if(!this.mouseTail)return;const{lineCap:t,lineWidth:s,strokeStyle:r,duration:n}=this.config.mouseTail===!0?Ht:Object.assign({},Ht,this.config.mouseTail),o=()=>{if(!this.mouseTail)return;const l=this.mouseTail.getContext("2d");!l||!this.tailPositions.length||(l.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),l.beginPath(),l.lineWidth=s,l.lineCap=t,l.strokeStyle=r,l.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach(a=>l.lineTo(a.x,a.y)),l.stroke())};this.tailPositions.push(e),o(),setTimeout(()=>{this.tailPositions=this.tailPositions.filter(l=>l!==e),o()},n/this.speedService.state.context.timer.speed)}hoverElements(e){var t;(t=this.lastHoveredRootNode||this.iframe.contentDocument)==null||t.querySelectorAll(".\\:hover").forEach(r=>{r.classList.remove(":hover")}),this.lastHoveredRootNode=e.getRootNode();let s=e;for(;s;)s.classList&&s.classList.add(":hover"),s=s.parentElement}isUserInteraction(e){return e.type!==P.IncrementalSnapshot?!1:e.data.source>N.Mutation&&e.data.source<=N.Input}backToNormal(){this.nextUserInteractionEvent=null,!this.speedService.state.matches("normal")&&(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(R.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(e,t){this.warn(`Node with id '${t}' not found. `,e)}warnCanvasMutationFailed(e,t){this.warn("Has error on canvas update",t,"canvas mutation:",e)}debugNodeNotFound(e,t){this.debug(`Node with id '${t}' not found. `,e)}warn(...e){this.config.showWarning&&this.config.logger.warn(rr,...e)}debug(...e){this.config.showDebug&&this.config.logger.log(rr,...e)}}exports.Replayer=ah;
;if (typeof module.exports == "object" && typeof exports == "object") {
  var __cp = (to, from, except, desc) => {
    if ((from && typeof from === "object") || typeof from === "function") {
      for (let key of Object.getOwnPropertyNames(from)) {
        if (!Object.prototype.hasOwnProperty.call(to, key) && key !== except)
        Object.defineProperty(to, key, {
          get: () => from[key],
          enumerable: !(desc = Object.getOwnPropertyDescriptor(from, key)) || desc.enumerable,
        });
      }
    }
    return to;
  };
  module.exports = __cp(module.exports, exports);
}
return module.exports;
}))
//# sourceMappingURL=rrweb-replay.umd.min.cjs.map
